<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Nova Browser</title>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap');

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Space Grotesk', sans-serif;
			background: #0a0a14;
			height: 100vh;
			overflow: hidden;
			display: flex;
			flex-direction: column;
		}

		/* top toolbar stuff */
		.toolbar {
			background: linear-gradient(135deg, #16162a, #1a1a2e);
			padding: 12px 16px;
			display: flex;
			gap: 12px;
			align-items: center;
			border-bottom: 1px solid #6366f1;
		}

		.nav-buttons {
			display: flex;
			gap: 6px;
		}

		.nav-btn {
			width: 36px;
			height: 36px;
			border-radius: 8px;
			background: rgba(99, 102, 241, 0.1);
			border: 1px solid rgba(99, 102, 241, 0.3);
			color: #6366f1;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.2s;
			font-size: 18px;
		}

		.nav-btn:hover:not(:disabled) {
			background: rgba(99, 102, 241, 0.2);
			transform: scale(1.05);
		}

		.nav-btn:disabled {
			opacity: 0.3;
			cursor: not-allowed;
		}

		.url-bar {
			flex: 1;
			display: flex;
			gap: 8px;
			align-items: center;
			background: rgba(30, 30, 46, 0.8);
			border: 2px solid rgba(100, 100, 120, 0.3);
			border-radius: 12px;
			padding: 0 16px;
			transition: all 0.3s;
		}

		.url-bar:focus-within {
			border-color: #6366f1;
			background: rgba(30, 30, 46, 0.95);
			box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
		}

		.url-bar input {
			flex: 1;
			background: transparent;
			border: none;
			outline: none;
			color: #e8e8e8;
			font-size: 14px;
			padding: 10px 0;
			font-family: 'Space Grotesk', sans-serif;
		}

		.url-bar input::placeholder {
			color: rgba(200, 200, 220, 0.5);
		}

		.go-btn {
			padding: 6px 16px;
			background: linear-gradient(135deg, #6366f1, #8b5cf6);
			border: none;
			border-radius: 8px;
			color: white;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s;
			font-size: 13px;
		}

		.go-btn:hover {
			transform: scale(1.05);
			box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
		}

		.tabs-container {
			background: linear-gradient(135deg, #16162a, #1a1a2e);
			padding: 8px;
			display: flex;
			gap: 6px;
			border-bottom: 1px solid rgba(99, 102, 241, 0.3);
			overflow-x: auto;
			scrollbar-width: thin;
			scrollbar-color: #6366f1 #1a1a2e;
		}

		.tabs-container::-webkit-scrollbar {
			height: 6px;
		}

		.tabs-container::-webkit-scrollbar-track {
			background: #1a1a2e;
		}

		.tabs-container::-webkit-scrollbar-thumb {
			background: #6366f1;
			border-radius: 3px;
		}

		.tab {
			background: #1e1e30;
			padding: 10px 14px;
			border-radius: 8px 8px 0 0;
			cursor: pointer;
			display: flex;
			gap: 10px;
			align-items: center;
			min-width: 180px;
			max-width: 220px;
			color: #999;
			transition: all 0.2s;
			border: 1px solid transparent;
			position: relative;
		}

		.tab:hover {
			background: #252538;
		}

		.tab.active {
			background: #0a0a14;
			color: #e8e8e8;
			border-color: #6366f1;
		}

		.tab-title {
			flex: 1;
			font-size: 13px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.close-tab {
			width: 20px;
			height: 20px;
			border-radius: 4px;
			display: flex;
			align-items: center;
			justify-content: center;
			opacity: 0.7;
			font-size: 16px;
			flex-shrink: 0;
			transition: all 0.2s;
		}

		.close-tab:hover {
			background: #ef4444;
			opacity: 1;
		}

		.new-tab {
			background: linear-gradient(135deg, #6366f1, #8b5cf6);
			padding: 10px 18px;
			border-radius: 8px 8px 0 0;
			cursor: pointer;
			color: white;
			font-weight: 600;
			font-size: 20px;
			line-height: 1;
			transition: all 0.2s;
			min-width: auto;
		}

		.new-tab:hover {
			transform: scale(1.05);
			box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
		}

		.content {
			flex: 1;
			position: relative;
			background: #0a0a14;
		}

		iframe {
			width: 100%;
			height: 100%;
			border: none;
			display: none;
			background: white;
		}

		iframe.active {
			display: block;
		}

		.empty-state {
			height: 100%;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			color: #666;
			gap: 16px;
		}

		.empty-state-text {
			font-size: 18px;
			font-weight: 600;
		}

		.empty-state-hint {
			font-size: 14px;
			opacity: 0.7;
		}

		.loading {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 3px;
			background: linear-gradient(90deg, transparent, #6366f1, transparent);
			animation: loading 1.5s infinite;
			display: none;
		}

		.loading.active {
			display: block;
		}

		@keyframes loading {
			0% { transform: translateX(-100%); }
			100% { transform: translateX(100%); }
		}
	</style>
</head>
<body>
	<div class="tabs-container" id="tabsContainer">
		<div class="new-tab" id="newTabBtn">+</div>
	</div>

	<div class="toolbar">
		<div class="nav-buttons">
			<button class="nav-btn" id="backBtn" title="Back" disabled>←</button>
			<button class="nav-btn" id="forwardBtn" title="Forward" disabled>→</button>
			<button class="nav-btn" id="refreshBtn" title="Refresh">⟳</button>
		</div>
		<div class="url-bar">
			<input type="text" id="urlInput" placeholder="Enter URL or search..." />
			<button class="go-btn" id="goBtn">Go</button>
		</div>
	</div>

	<div class="content" id="content">
		<div class="loading" id="loading"></div>
		<div class="empty-state">
			<div class="empty-state-text">Welcome to Nova Browser</div>
			<div class="empty-state-hint">Press + to open a new tab</div>
		</div>
	</div>

	<script>
		var tabCounter = 0;
		var currentTab = null;
		var allTabs = {};

		// home page content
		var homeHTML = `<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Nova Network</title><style>@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0f0f1e 0%,#1a1a2e 100%);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;padding:20px}.search-container{width:100%;max-width:600px}.logo{text-align:center;margin-bottom:40px;font-size:48px;font-weight:700;font-family:'Space Grotesk',sans-serif;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 50%,#ec4899 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:2px}.search-wrapper{position:relative;display:flex;align-items:center;justify-content:center}input{width:300px;padding:18px 50px 18px 24px;font-size:16px;color:#e8e8e8;background:rgba(30,30,46,0.8);border:2px solid rgba(100,100,120,0.3);border-radius:16px;outline:none;transition:all 0.4s ease;backdrop-filter:blur(10px)}input::placeholder{color:rgba(200,200,220,0.5)}input:focus,input.expanded{width:600px;padding-right:130px;border-color:#6366f1;background:rgba(30,30,46,0.95);box-shadow:0 0 0 4px rgba(99,102,241,0.1),0 8px 24px rgba(99,102,241,0.2)}button{position:absolute;right:6px;padding:10px 12px;background:transparent;border:none;border-radius:10px;color:rgba(200,200,220,0.7);font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:6px;overflow:hidden;white-space:nowrap;opacity:0;pointer-events:none}button span{max-width:0;opacity:0;transition:all 0.3s ease}input:focus ~ button,input.expanded ~ button{padding:12px 20px;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);color:white;right:8px;opacity:1;pointer-events:auto}input:focus ~ button span,input.expanded ~ button span{max-width:100px;opacity:1;margin-left:2px}button:hover{color:#e8e8e8}input:focus ~ button:hover,input.expanded ~ button:hover{background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 100%);box-shadow:0 4px 12px rgba(99,102,241,0.4)}.icon{width:18px;height:18px}.hint{margin-top:12px;padding:12px 16px;background:rgba(30,30,46,0.5);border-radius:12px;color:rgba(200,200,220,0.7);font-size:14px;text-align:center;opacity:0;transition:opacity 0.3s}.hint.show{opacity:1}.tagline{margin-top:20px;text-align:center;color:rgba(200,200,220,0.6);font-size:16px;font-weight:500;letter-spacing:0.5px}#rotating{display:inline-block;min-width:100px;transition:opacity 0.3s}#rotating.fade{opacity:0}</style></head><body><div class="search-container"><h1 class="logo">Nova Network</h1><div class="search-wrapper"><input type="text" placeholder="Search anything..." id="inp"><button id="btn"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg><span>Search</span></button></div><div class="hint" id="hint"></div><p class="tagline">A Clean, Sleek, <span id="rotating">Web Proxy</span></p></div><script>const inp=document.getElementById('inp'),btn=document.getElementById('btn'),hint=document.getElementById('hint'),rotating=document.getElementById('rotating');function search(){const q=inp.value.trim();if(q){hint.textContent=\`Searching for: "\${q}"\`;hint.classList.add('show');setTimeout(()=>hint.classList.remove('show'),3000)}}btn.onclick=search;inp.onkeypress=e=>{if(e.key==='Enter')search()};inp.oninput=()=>{inp.classList.toggle('expanded',inp.value.trim())};inp.onblur=()=>{if(!inp.value.trim())inp.classList.remove('expanded')};inp.onfocus=()=>hint.classList.remove('show');const txts=['Web Proxy','UBG Site','Tools Site','Media Site'];let idx=0;function rotate(){rotating.classList.add('fade');setTimeout(()=>{idx=(idx+1)%txts.length;rotating.textContent=txts[idx];rotating.classList.remove('fade')},300)}setInterval(rotate,3000)<\/script></body></html>`;

		function makeNewTab() {
			tabCounter++;
			var tabId = 'tab-' + tabCounter;
			
			// get rid of empty state if it exists
			var emptyState = document.querySelector('.empty-state');
			if (emptyState) {
				emptyState.remove();
			}
			
			// create tab element
			var tab = document.createElement('div');
			tab.className = 'tab';
			tab.dataset.id = tabId;
			tab.innerHTML = '<div class="tab-title">New Tab</div><div class="close-tab">✕</div>';
			
			// create iframe
			var frame = document.createElement('iframe');
			frame.id = tabId;
			frame.srcdoc = homeHTML;
			
			allTabs[tabId] = {
				el: tab,
				frame: frame,
				title: 'New Tab',
				currentUrl: 'nova://home',
				hist: ['nova://home'],
				histIdx: 0
			};
			
			document.getElementById('tabsContainer').insertBefore(tab, document.getElementById('newTabBtn'));
			document.getElementById('content').appendChild(frame);
			
			// tab click handler
			tab.onclick = function(e) {
				if (e.target.classList.contains('close-tab')) {
					removeTab(tabId);
				} else {
					switchToTab(tabId);
				}
			};
			
			// iframe load handler
			frame.onload = function() {
				getTabTitle(tabId);
				document.getElementById('loading').classList.remove('active');
			};
			
			switchToTab(tabId);
		}

		function switchToTab(id) {
			if (currentTab === id) return;
			
			// deactivate all tabs
			for (var t in allTabs) {
				allTabs[t].el.classList.remove('active');
				allTabs[t].frame.classList.remove('active');
			}
			
			// activate selected tab
			allTabs[id].el.classList.add('active');
			allTabs[id].frame.classList.add('active');
			currentTab = id;
			
			var urlInput = document.getElementById('urlInput');
			urlInput.value = allTabs[id].currentUrl === 'nova://home' ? '' : allTabs[id].currentUrl;
			updateButtons();
		}

		function removeTab(id) {
			// don't close last tab (TODO: maybe add this later?)
			if (Object.keys(allTabs).length === 1) {
				return;
			}
			
			allTabs[id].el.remove();
			allTabs[id].frame.remove();
			delete allTabs[id];
			
			// switch to another tab if we closed the active one
			if (currentTab === id) {
				var remaining = Object.keys(allTabs);
				if (remaining.length > 0) {
					switchToTab(remaining[remaining.length - 1]);
				} else {
					currentTab = null;
					document.getElementById('urlInput').value = '';
				}
			}
		}

		function goToUrl(url) {
			if (!currentTab) return;
			
			// handle urls that don't have protocol
			if (!url.startsWith('http://') && !url.startsWith('https://')) {
				if (url.includes('.') && !url.includes(' ')) {
					url = 'https://' + url;
				} else {
					// search google instead
					url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
				}
			}
			
			document.getElementById('loading').classList.add('active');
			
			var tab = allTabs[currentTab];
			tab.currentUrl = url;
			tab.hist = tab.hist.slice(0, tab.histIdx + 1);
			tab.hist.push(url);
			tab.histIdx++;
			
			tab.frame.src = url;
			document.getElementById('urlInput').value = url;
			updateButtons();
		}

		function getTabTitle(id) {
			var tab = allTabs[id];
			try {
				var doc = tab.frame.contentDocument || tab.frame.contentWindow.document;
				var title = doc.title || 'New Tab';
				tab.title = title;
				tab.el.querySelector('.tab-title').textContent = title;
			} catch (err) {
				// cross-origin, can't read title
				tab.el.querySelector('.tab-title').textContent = 'External Site';
			}
		}

		function updateButtons() {
			if (!currentTab) return;
			
			var tab = allTabs[currentTab];
			document.getElementById('backBtn').disabled = tab.histIdx <= 0;
			document.getElementById('forwardBtn').disabled = tab.histIdx >= tab.hist.length - 1;
		}

		function navBack() {
			if (!currentTab) return;
			var tab = allTabs[currentTab];
			if (tab.histIdx > 0) {
				tab.histIdx--;
				var url = tab.hist[tab.histIdx];
				if (url === 'nova://home') {
					tab.frame.srcdoc = homeHTML;
				} else {
					tab.frame.src = url;
				}
				tab.currentUrl = url;
				document.getElementById('urlInput').value = url === 'nova://home' ? '' : url;
				updateButtons();
			}
		}

		function navForward() {
			if (!currentTab) return;
			var tab = allTabs[currentTab];
			if (tab.histIdx < tab.hist.length - 1) {
				tab.histIdx++;
				var url = tab.hist[tab.histIdx];
				if (url === 'nova://home') {
					tab.frame.srcdoc = homeHTML;
				} else {
					tab.frame.src = url;
				}
				tab.currentUrl = url;
				document.getElementById('urlInput').value = url === 'nova://home' ? '' : url;
				updateButtons();
			}
		}

		function doRefresh() {
			if (!currentTab) return;
			var tab = allTabs[currentTab];
			document.getElementById('loading').classList.add('active');
			if (tab.currentUrl === 'nova://home') {
				tab.frame.srcdoc = homeHTML;
			} else {
				tab.frame.src = tab.currentUrl;
			}
		}

		// event listeners
		document.getElementById('newTabBtn').addEventListener('click', makeNewTab);
		
		document.getElementById('goBtn').addEventListener('click', function() {
			var url = document.getElementById('urlInput').value.trim();
			if (url) goToUrl(url);
		});
		
		document.getElementById('urlInput').addEventListener('keypress', function(e) {
			if (e.key === 'Enter') {
				var url = e.target.value.trim();
				if (url) goToUrl(url);
			}
		});
		
		document.getElementById('backBtn').addEventListener('click', navBack);
		document.getElementById('forwardBtn').addEventListener('click', navForward);
		document.getElementById('refreshBtn').addEventListener('click', doRefresh);

		// start with one tab open
		makeNewTab();
	</script>
</body>
</html>
