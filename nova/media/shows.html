<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>TV Shows</title>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

		:root {
			--bg-primary: #0f0a0a;
			--bg-secondary: #1a0f0f;
			--bg-tertiary: #2a1818;
			--accent: #dc2626;
			--accent-secondary: #ef4444;
			--text-primary: #ffffff;
			--text-secondary: #a1a1aa;
			--text-muted: #71717a;
			--border: #3a1a1a;
			--gradient: linear-gradient(135deg, var(--accent), var(--accent-secondary));
			--shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Inter', sans-serif;
			background: linear-gradient(135deg, #1a0a0a, #2e1a1a, #1e1616);
			color: var(--text-primary);
			line-height: 1.6;
		}

		::-webkit-scrollbar {
			width: 8px;
		}

		::-webkit-scrollbar-track {
			background: var(--bg-secondary);
		}

		::-webkit-scrollbar-thumb {
			background: var(--accent);
			border-radius: 4px;
		}


		.container {
			max-width: 1400px;
			margin: 0 auto;
			padding: 2rem;
			padding-top: 6rem;
			position: relative;
		}

		.search-bar {
			display: flex;
			gap: 1rem;
			margin-bottom: 3rem;
			background: rgba(26, 15, 15, 0.9);
			backdrop-filter: blur(20px);
			padding: 1.5rem;
			border-radius: 16px;
			border: 1px solid var(--border);
		}

		.search-bar input {
			flex: 1;
			padding: 1rem 1.5rem;
			border: 1px solid var(--border);
			background: var(--bg-secondary);
			color: var(--text-primary);
			border-radius: 12px;
			font-size: 1rem;
			transition: all 0.3s ease;
			outline: none;
		}

		.search-bar input:focus {
			border-color: var(--accent);
			box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.3);
			transform: scale(1.02);
		}

		.search-bar input::placeholder {
			color: var(--text-muted);
		}

		.btn {
			padding: 1rem 2rem;
			border: none;
			border-radius: 12px;
			cursor: pointer;
			font-weight: 600;
			font-size: 0.95rem;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
		}

		.btn::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
			transition: left 0.5s;
		}

		.btn:hover::before {
			left: 100%;
		}

		.btn-primary {
			background: var(--gradient);
			color: var(--text-primary);
			box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
		}

		.btn-primary:hover {
			transform: translateY(-2px) scale(1.05);
			box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
		}

		.btn-secondary {
			background: var(--bg-tertiary);
			color: var(--text-primary);
			border: 1px solid var(--border);
		}

		.btn-secondary:hover {
			background: var(--bg-secondary);
			transform: translateY(-2px);
		}

		h2 {
			font-size: 2rem;
			font-weight: 700;
			margin: 3rem 0 1.5rem;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			position: relative;
		}

		h2::after {
			content: '';
			position: absolute;
			bottom: -8px;
			left: 0;
			width: 60px;
			height: 3px;
			background: var(--gradient);
			border-radius: 2px;
		}

		.grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
			gap: 2rem;
			margin-bottom: 4rem;
		}

		.card {
			background: var(--bg-secondary);
			border-radius: 16px;
			overflow: hidden;
			cursor: pointer;
			transition: all 0.15s ease;
			border: 1px solid var(--border);
			position: relative;
		}

		.card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: var(--gradient);
			opacity: 0;
			transition: opacity 0.15s ease;
			z-index: 1;
		}

		.card:hover {
			transform: translateY(-8px) scale(1.02);
			box-shadow: var(--shadow);
			border-color: var(--accent);
		}

		.card:hover::before {
			opacity: 0.1;
		}

		.card img {
			width: 100%;
			height: 420px;
			object-fit: cover;
			transition: transform 0.15s ease;
		}

		.card:hover img {
			transform: scale(1.05);
		}

		.card-info {
			display: none;
		}

		.card-title {
			display: none;
		}

		.card-meta {
			display: none;
		}

		.card-hover-overlay {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: linear-gradient(to bottom, transparent 0%, transparent 60%, rgba(0, 0, 0, 0.9) 100%);
			opacity: 0;
			transition: opacity 0.15s ease;
			z-index: 3;
			display: flex;
			flex-direction: column;
			justify-content: flex-end;
			padding: 1.5rem;
			pointer-events: none;
		}

		.card:hover .card-hover-overlay {
			opacity: 1;
		}

		.card-hover-title {
			font-weight: 600;
			font-size: 1.1rem;
			color: var(--text-primary);
			margin-bottom: 0.5rem;
		}

		.card-hover-meta {
			color: var(--text-secondary);
			font-size: 0.9rem;
			display: flex;
			align-items: center;
			gap: 0.75rem;
		}

		.card-hover-date {
			background: rgba(220, 38, 38, 0.2);
			padding: 0.25rem 0.5rem;
			border-radius: 6px;
			border: 1px solid rgba(220, 38, 38, 0.3);
		}

		.card-hover-rating {
			background: rgba(255, 215, 0, 0.2);
			padding: 0.25rem 0.5rem;
			border-radius: 6px;
			border: 1px solid rgba(255, 215, 0, 0.3);
			display: flex;
			align-items: center;
			gap: 0.25rem;
		}

		.popup {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			background: rgba(15, 10, 10, 0.95);
			backdrop-filter: blur(20px);
			display: none;
			align-items: center;
			justify-content: center;
			z-index: 1000;
			padding: 2rem;
			opacity: 0;
			transition: opacity 0.3s ease;
		}

		.popup.show {
			display: flex;
			opacity: 1;
		}

		.popup-content {
			background: var(--bg-secondary);
			border: 1px solid var(--border);
			border-radius: 24px;
			max-width: 1000px;
			width: 100%;
			max-height: 90vh;
			overflow-y: auto;
			box-shadow: var(--shadow);
			transform: scale(0.9);
			transition: transform 0.3s ease;
		}

		.popup.show .popup-content {
			transform: scale(1);
		}

		.popup-header {
			padding: 2rem;
			display: flex;
			justify-content: space-between;
			align-items: start;
			border-bottom: 1px solid var(--border);
			background: var(--bg-tertiary);
			border-radius: 24px 24px 0 0;
		}

		.popup-body {
			padding: 2rem;
		}

		.close-btn {
			background: var(--bg-tertiary);
			border: 1px solid var(--border);
			color: var(--text-primary);
			font-size: 1.5rem;
			cursor: pointer;
			width: 40px;
			height: 40px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
		}

		.close-btn:hover {
			background: var(--accent);
			transform: scale(1.1) rotate(90deg);
		}

		.show-info {
			display: grid;
			grid-template-columns: 240px 1fr;
			gap: 2rem;
			margin-bottom: 2rem;
		}

		.show-poster img {
			width: 100%;
			border-radius: 16px;
			box-shadow: var(--shadow);
			border: 1px solid var(--border);
		}

		.show-details h1 {
			margin-bottom: 0.5rem;
			font-size: 2rem;
			font-weight: 700;
		}

		.show-details p {
			color: var(--text-secondary);
			margin: 1rem 0;
			line-height: 1.7;
		}

		.info-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem;
			margin: 1.5rem 0;
		}

		.info-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 1rem;
			background: var(--bg-tertiary);
			border-radius: 12px;
			border: 1px solid var(--border);
			transition: all 0.15s ease;
		}

		.info-item:hover {
			border-color: var(--accent);
			transform: translateY(-2px);
		}

		.info-item span:first-child {
			color: var(--text-muted);
			font-weight: 500;
		}

		.info-item span:last-child {
			color: var(--text-primary);
			font-weight: 600;
		}

		.episodes-section h3 {
			margin: 2rem 0 1rem;
			font-size: 1.5rem;
			color: var(--text-primary);
		}

		.season-selector {
			margin-bottom: 1.5rem;
		}

		.season-selector select {
			padding: 1rem 1.5rem;
			background: var(--bg-tertiary);
			color: var(--text-primary);
			border: 1px solid var(--border);
			border-radius: 12px;
			font-size: 1rem;
			cursor: pointer;
			transition: all 0.3s ease;
			min-width: 200px;
		}

		.season-selector select:focus {
			outline: none;
			border-color: var(--accent);
			box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.3);
		}

		.episodes-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
			gap: 1.5rem;
		}

		.episode-card {
			background: var(--bg-tertiary);
			border-radius: 16px;
			padding: 1.5rem;
			cursor: pointer;
			transition: all 0.15s ease;
			border: 1px solid var(--border);
			position: relative;
			overflow: hidden;
		}

		.episode-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 50%;
			width: 0%;
			height: 4px;
			background: var(--gradient);
			transition: all 0.15s ease;
			transform: translateX(-50%);
		}

		.episode-card:hover::before {
			width: 100%;
		}

		.episode-card:hover {
			background: var(--bg-secondary);
			transform: translateY(-4px);
			box-shadow: var(--shadow);
			border-color: var(--accent);
		}

		.episode-title {
			font-weight: 600;
			margin-bottom: 0.5rem;
			color: var(--text-primary);
			font-size: 1.1rem;
		}

		.episode-meta {
			color: var(--text-muted);
			font-size: 0.9rem;
			display: flex;
			gap: 0.5rem;
			align-items: center;
			margin-bottom: 0.75rem;
		}

		@media (max-width: 768px) {

			.container {
				padding: 1rem;
				padding-top: 5rem;
			}

			.search-bar {
				flex-direction: column;
				position: static;
				margin-bottom: 2rem;
				margin-top: 0;
			}

			.grid {
				grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
				gap: 1rem;
			}

			.card img {
				height: 240px;
			}

			.show-info {
				grid-template-columns: 1fr;
				gap: 1rem;
			}

			.info-grid {
				grid-template-columns: 1fr;
			}

			.episodes-grid {
				grid-template-columns: 1fr;
			}

			h2 {
				font-size: 1.5rem;
			}

			.popup {
				padding: 1rem;
			}

			.popup-content {
				border-radius: 16px;
			}

			.popup-header {
				padding: 1.5rem;
				border-radius: 16px 16px 0 0;
			}

			.popup-body {
				padding: 1.5rem;
			}

			.card-hover-overlay {
				display: none;
			}
		}
	</style>
</head>

<body>
		<div class="container">
			<div class="search-bar">
				<input type="text" id="searchInput" placeholder="Search TV shows...">
				<button class="btn btn-primary" onclick="handleSearch()">Search</button>
				<button class="btn btn-secondary" id="backBtn" onclick="goHome()" style="display:none">Back</button>
			</div>

			<div id="content">
				<h2>Popular Action & Adventure</h2>
				<div class="grid" id="action"></div>
				<h2>Popular Comedy</h2>
				<div class="grid" id="comedy"></div>
				<h2>Popular Drama</h2>
				<div class="grid" id="drama"></div>
			</div>
		</div>

		<div class="popup" id="popup">
			<div class="popup-content">
				<div class="popup-header">
					<h2 id="popupTitle">Show Details</h2>
					<button class="close-btn" onclick="closePopup()">&times;</button>
				</div>
				<div class="popup-body" id="popupBody"></div>
			</div>
		</div>

		<script>
			const API_KEY = '79c1de8a90112f2951a563bb7ce87969';
        const IMG_BASE = 'https://image.tmdb.org/t/p/w500';
        
        const genres = {
            action: 10759,
            comedy: 35,
            drama: 18
        };

        let currentShow = null;
        let currentSeasons = [];

        document.getElementById('searchInput').addEventListener('keypress', e => {
            if (e.key === 'Enter') handleSearch();
        });
        
        loadGenres();

        async function loadGenres() {
            for (const [name, id] of Object.entries(genres)) {
                try {
                    const response = await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${API_KEY}&with_genres=${id}&sort_by=popularity.desc&page=1`);
                    const data = await response.json();
                    displayShows(data.results.slice(0, 6), name);
                } catch (error) {
                    console.error(`Error loading ${name}:`, error);
                }
            }
        }

        function displayShows(shows, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = shows.map(show => `
                <div class="card" onclick="openShowPopup(${show.id})">
                    <img src="${IMG_BASE}${show.poster_path}" alt="${show.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDIwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTUwIiBmaWxsPSIjNzc3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5ObyBJbWFnZTwvdGV4dD4KPC9zdmc+'">
                    <div class="card-info">
                        <div class="card-title">${show.name}</div>
                        <div class="card-meta">${show.first_air_date?.split('-')[0] || 'TBA'} • ⭐ ${show.vote_average?.toFixed(1) || 'N/A'}</div>
                    </div>
                    <div class="card-hover-overlay">
                        <div class="card-hover-title">${show.name}</div>
                        <div class="card-hover-meta">
                            <div class="card-hover-date">${show.first_air_date?.split('-')[0] || 'TBA'}</div>
                            <div class="card-hover-rating">⭐ ${show.vote_average?.toFixed(1) || 'N/A'}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function handleSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;

            try {
                const response = await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${API_KEY}&query=${encodeURIComponent(query)}`);
                const data = await response.json();
                
                document.getElementById('content').innerHTML = `
                    <h2>Search Results for "${query}"</h2>
                    <div class="grid" id="searchResults"></div>
                `;
                
                displayShows(data.results, 'searchResults');
                document.getElementById('backBtn').style.display = 'block';
            } catch (error) {
                console.error('Search error:', error);
            }
        }

        function goHome() {
            document.getElementById('content').innerHTML = `
                <h2>Popular Action & Adventure</h2>
                <div class="grid" id="action"></div>
                <h2>Popular Comedy</h2>
                <div class="grid" id="comedy"></div>
                <h2>Popular Drama</h2>
                <div class="grid" id="drama"></div>
            `;
            document.getElementById('backBtn').style.display = 'none';
            document.getElementById('searchInput').value = '';
            loadGenres();
        }

        async function openShowPopup(showId) {
            try {
                const [showResponse, seasonsResponse] = await Promise.all([
                    fetch(`https://api.themoviedb.org/3/tv/${showId}?api_key=${API_KEY}`),
                    fetch(`https://api.themoviedb.org/3/tv/${showId}?api_key=${API_KEY}&append_to_response=aggregate_credits`)
                ]);
                
                const show = await showResponse.json();
                currentShow = show;
                currentSeasons = show.seasons?.filter(season => season.season_number > 0) || [];
                
                document.getElementById('popupTitle').textContent = show.name;
                document.getElementById('popupBody').innerHTML = `
                    <div class="show-info">
                        <div class="show-poster">
                            <img src="${IMG_BASE}${show.poster_path}" alt="${show.name}">
                        </div>
                        <div class="show-details">
                            <h1>${show.name}</h1>
                            <p>${show.overview || 'No overview available.'}</p>
                            <div class="info-grid">
                                <div class="info-item"><span>Status:</span><span>${show.status}</span></div>
                                <div class="info-item"><span>Rating:</span><span>⭐ ${show.vote_average?.toFixed(1)}/10</span></div>
                                <div class="info-item"><span>Seasons:</span><span>${show.number_of_seasons}</span></div>
                                <div class="info-item"><span>Episodes:</span><span>${show.number_of_episodes}</span></div>
                                <div class="info-item"><span>First Aired:</span><span>${show.first_air_date}</span></div>
                                <div class="info-item"><span>Language:</span><span>${show.original_language?.toUpperCase()}</span></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="episodes-section">
                        <h3>Episodes</h3>
                        <div class="season-selector">
                            <select id="seasonSelect" onchange="loadSeasonEpisodes()">
                                ${currentSeasons.map(season => 
                                    `<option value="${season.season_number}">Season ${season.season_number} (${season.episode_count} episodes)</option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="episodes-grid" id="episodesGrid">
                            <p>Loading episodes...</p>
                        </div>
                    </div>
                `;
                
                document.getElementById('popup').classList.add('show');
                
                if (currentSeasons.length > 0) {
                    loadSeasonEpisodes();
                }
            } catch (error) {
                console.error('Error loading show:', error);
            }
        }

        async function loadSeasonEpisodes() {
            const seasonNumber = document.getElementById('seasonSelect').value;
            const episodesGrid = document.getElementById('episodesGrid');
            
            episodesGrid.innerHTML = '<p>Loading episodes...</p>';
            
            try {
                const response = await fetch(`https://api.themoviedb.org/3/tv/${currentShow.id}/season/${seasonNumber}?api_key=${API_KEY}`);
                const season = await response.json();
                
                if (season.episodes && season.episodes.length > 0) {
                    episodesGrid.innerHTML = season.episodes.map(episode => `
                        <div class="episode-card" onclick="watchEpisode(${seasonNumber}, ${episode.episode_number})">
                            <div class="episode-title">E${episode.episode_number}: ${episode.name}</div>
                            <div class="episode-meta">
                                ${episode.air_date || 'TBA'} • ${episode.runtime || '?'} min
                                ${episode.vote_average ? `• ⭐ ${episode.vote_average.toFixed(1)}` : ''}
                            </div>
                            <p style="margin-top: 0.5rem; color: #ccc; font-size: 0.9rem;">
                                ${episode.overview ? episode.overview.substring(0, 100) + '...' : 'No description available.'}
                            </p>
                        </div>
                    `).join('');
                } else {
                    episodesGrid.innerHTML = '<p>No episodes available for this season.</p>';
                }
            } catch (error) {
                console.error('Error loading episodes:', error);
                episodesGrid.innerHTML = '<p>Failed to load episodes.</p>';
            }
        }

        function watchEpisode(season, episode) {
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
                background: rgba(0,0,0,0.95); z-index: 10000; display: flex;
                align-items: center; justify-content: center; padding: 20px;
            `;

            const playerContainer = document.createElement('div');
            playerContainer.style.cssText = `
                width: 100%; max-width: 1200px; height: 80vh; background: #000;
                border-radius: 12px; overflow: hidden; position: relative;
            `;

            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '×';
            closeBtn.style.cssText = `
                position: absolute; top: 10px; right: 10px; z-index: 1;
                width: 40px; height: 40px; border: none; background: rgba(0,0,0,0.7);
                color: white; font-size: 20px; border-radius: 50%; cursor: pointer;
            `;
            closeBtn.onclick = () => document.body.removeChild(overlay);

            const iframe = document.createElement('iframe');
iframe.src = `https://player.vidify.top/embed/tv/${currentShow.id}/${season}/${episode}?autoplay=false&poster=true&chromecast=true&servericon=true&setting=true&pip=true&download=true&logourl=https%3A%2F%2Ffiles.catbox.moe%2Fd1ub0l.png&font=Roboto&fontcolor=6f63ff&fontsize=20&opacity=0.5&primarycolor=ff0000&secondarycolor=1f2937&iconcolor=ffffff`; iframe.style.cssText = 'width: 100%; height: 100%; border: none;'; iframe.allowFullscreen = true;
            iframe.allowFullscreen = true;

            playerContainer.appendChild(closeBtn);
            playerContainer.appendChild(iframe);
            overlay.appendChild(playerContainer);
            document.body.appendChild(overlay);
        }

        function closePopup() {
            document.getElementById('popup').classList.remove('show');
        }

        document.getElementById('popup').addEventListener('click', (e) => {
            if (e.target.id === 'popup') closePopup();
        });
		</script>
</body>

</html>
