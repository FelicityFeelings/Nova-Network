<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Novaflix</title>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

		:root {
			--bg-primary: #0f0a0a;
			--bg-secondary: #1a0f0f;
			--bg-tertiary: #2a1818;
			--accent: #dc2626;
			--accent-secondary: #ef4444;
			--text-primary: #ffffff;
			--text-secondary: #a1a1aa;
			--text-muted: #71717a;
			--border: #3a1a1a;
			--gradient: linear-gradient(135deg, var(--accent), var(--accent-secondary));
			--shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Inter', sans-serif;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			overflow-x: hidden;
		}

		::-webkit-scrollbar {
			width: 8px;
		}

		::-webkit-scrollbar-track {
			background: var(--bg-secondary);
		}

		::-webkit-scrollbar-thumb {
			background: var(--accent);
			border-radius: 4px;
		}

		.hero {
			position: relative;
			height: 85vh;
			margin-top: 0;
			overflow: hidden;
		}

		.hero-slider {
			position: relative;
			height: 100%;
			width: 100%;
		}

		.hero-slide {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			opacity: 0;
			transition: opacity 1s ease;
		}

		.hero-slide.active {
			opacity: 1;
		}

		.hero-slide::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: linear-gradient(to right, rgba(15, 10, 10, 1) 0%, rgba(15, 10, 10, 0.7) 50%, transparent 100%);
			z-index: 1;
		}

		.hero-slide::after {
			content: '';
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			height: 200px;
			background: linear-gradient(to bottom, transparent, var(--bg-primary));
			z-index: 1;
		}

		.hero-bg {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.hero-content {
			position: absolute;
			top: 50%;
			left: 5%;
			transform: translateY(-50%);
			z-index: 2;
			max-width: 600px;
		}

		.hero-title {
			font-size: 4rem;
			font-weight: 900;
			margin-bottom: 1rem;
			line-height: 1.1;
			text-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
		}

		.hero-description {
			font-size: 1.2rem;
			color: var(--text-secondary);
			margin-bottom: 2rem;
			line-height: 1.6;
			text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
		}

		.hero-meta {
			display: flex;
			gap: 1.5rem;
			margin-bottom: 2rem;
			flex-wrap: wrap;
		}

		.meta-item {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			color: var(--text-secondary);
			font-size: 0.95rem;
		}

		.rating {
			background: rgba(255, 215, 0, 0.2);
			padding: 0.3rem 0.7rem;
			border-radius: 6px;
			border: 1px solid rgba(255, 215, 0, 0.3);
			color: #ffd700;
			font-weight: 600;
		}

		.hero-buttons {
			display: flex;
			gap: 1rem;
		}

		.btn {
			padding: 1rem 2.5rem;
			border: none;
			border-radius: 12px;
			cursor: pointer;
			font-weight: 600;
			font-size: 1rem;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			gap: 0.5rem;
		}

		.btn-play {
			background: var(--gradient);
			color: var(--text-primary);
			box-shadow: 0 4px 20px rgba(220, 38, 38, 0.4);
		}

		.btn-play:hover {
			transform: translateY(-2px) scale(1.05);
			box-shadow: 0 8px 30px rgba(220, 38, 38, 0.6);
		}

		.slider-dots {
			position: absolute;
			bottom: 3rem;
			right: 5%;
			z-index: 3;
			display: flex;
			gap: 0.75rem;
		}

		.dot {
			width: 12px;
			height: 12px;
			border-radius: 50%;
			background: rgba(255, 255, 255, 0.3);
			cursor: pointer;
			transition: all 0.3s ease;
		}

		.dot.active {
			background: var(--accent);
			width: 40px;
			border-radius: 6px;
		}

		.content-section {
			padding: 3rem 5%;
			position: relative;
		}

		.section-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 2rem;
		}

		.section-title {
			font-size: 1.8rem;
			font-weight: 700;
			color: var(--text-primary);
		}

		.view-all {
			color: var(--accent);
			text-decoration: none;
			font-weight: 600;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			gap: 0.5rem;
		}

		.view-all:hover {
			gap: 1rem;
			color: var(--accent-secondary);
		}

		.carousel-container {
			position: relative;
			overflow: visible;
		}

		.carousel {
			display: flex;
			gap: 1.5rem;
			overflow-x: auto;
			scroll-behavior: smooth;
			padding: 1rem 0;
			scrollbar-width: none;
		}

		.carousel::-webkit-scrollbar {
			display: none;
		}

		.carousel-btn {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			background: rgba(15, 10, 10, 0.9);
			border: 1px solid var(--border);
			color: var(--text-primary);
			width: 50px;
			height: 50px;
			border-radius: 50%;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.5rem;
			z-index: 10;
			transition: all 0.3s ease;
			backdrop-filter: blur(10px);
		}

		.carousel-btn:hover {
			background: var(--accent);
			transform: translateY(-50%) scale(1.1);
		}

		.carousel-btn.prev {
			left: -25px;
		}

		.carousel-btn.next {
			right: -25px;
		}

		.card {
			min-width: 280px;
			background: var(--bg-secondary);
			border-radius: 16px;
			overflow: hidden;
			cursor: pointer;
			transition: all 0.3s ease;
			border: 1px solid var(--border);
			position: relative;
		}

		.card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: var(--gradient);
			opacity: 0;
			transition: opacity 0.3s ease;
			z-index: 1;
		}

		.card:hover {
			transform: translateY(-10px) scale(1.05);
			box-shadow: var(--shadow);
			border-color: var(--accent);
		}

		.card:hover::before {
			opacity: 0.1;
		}

		.card-img {
			width: 100%;
			height: 420px;
			object-fit: cover;
			transition: transform 0.3s ease;
		}

		.card:hover .card-img {
			transform: scale(1.1);
		}

		.card-overlay {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: linear-gradient(to bottom, transparent 0%, transparent 50%, rgba(0, 0, 0, 0.95) 100%);
			opacity: 0;
			transition: opacity 0.3s ease;
			z-index: 2;
			display: flex;
			flex-direction: column;
			justify-content: flex-end;
			padding: 1.5rem;
		}

		.card:hover .card-overlay {
			opacity: 1;
		}

		.card-title {
			font-weight: 600;
			font-size: 1.1rem;
			margin-bottom: 0.5rem;
		}

		.card-meta {
			display: flex;
			align-items: center;
			gap: 1rem;
			font-size: 0.9rem;
			color: var(--text-secondary);
		}

		.card-rating {
			background: rgba(255, 215, 0, 0.2);
			padding: 0.25rem 0.5rem;
			border-radius: 6px;
			border: 1px solid rgba(255, 215, 0, 0.3);
			color: #ffd700;
		}

		.popup {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			background: rgba(15, 10, 10, 0.95);
			backdrop-filter: blur(20px);
			display: none;
			align-items: center;
			justify-content: center;
			z-index: 1000;
			padding: 2rem;
			opacity: 0;
			transition: opacity 0.3s ease;
		}

		.popup.show {
			display: flex;
			opacity: 1;
		}

		.popup-content {
			background: var(--bg-secondary);
			border: 1px solid var(--border);
			border-radius: 24px;
			max-width: 1000px;
			width: 100%;
			max-height: 90vh;
			overflow-y: auto;
			box-shadow: var(--shadow);
			transform: scale(0.9);
			transition: transform 0.3s ease;
		}

		.popup.show .popup-content {
			transform: scale(1);
		}

		.popup-header {
			padding: 2rem;
			display: flex;
			justify-content: space-between;
			align-items: start;
			border-bottom: 1px solid var(--border);
			background: var(--bg-tertiary);
			border-radius: 24px 24px 0 0;
		}

		.popup-body {
			padding: 2rem;
		}

		.close-btn {
			background: var(--bg-tertiary);
			border: 1px solid var(--border);
			color: var(--text-primary);
			font-size: 1.5rem;
			cursor: pointer;
			width: 40px;
			height: 40px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
		}

		.close-btn:hover {
			background: var(--accent);
			transform: scale(1.1) rotate(90deg);
		}

		.content-info {
			display: grid;
			grid-template-columns: 240px 1fr;
			gap: 2rem;
			margin-bottom: 2rem;
		}

		.content-poster img {
			width: 100%;
			border-radius: 16px;
			box-shadow: var(--shadow);
			border: 1px solid var(--border);
		}

		.content-details h1 {
			margin-bottom: 0.5rem;
			font-size: 2rem;
			font-weight: 700;
		}

		.content-details p {
			color: var(--text-secondary);
			margin: 1rem 0;
			line-height: 1.7;
		}

		.info-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem;
			margin: 1.5rem 0;
		}

		.info-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 1rem;
			background: var(--bg-tertiary);
			border-radius: 12px;
			border: 1px solid var(--border);
			transition: all 0.15s ease;
		}

		.info-item:hover {
			border-color: var(--accent);
			transform: translateY(-2px);
		}

		.info-item span:first-child {
			color: var(--text-muted);
			font-weight: 500;
		}

		.info-item span:last-child {
			color: var(--text-primary);
			font-weight: 600;
		}

		.watch-btn {
			width: 100%;
			padding: 1.5rem;
			margin-top: 1.5rem;
			background: var(--gradient);
			color: var(--text-primary);
			border: none;
			border-radius: 12px;
			font-size: 1.1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			text-transform: uppercase;
			letter-spacing: 1px;
		}

		.watch-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(220, 38, 38, 0.5);
		}

		.episodes-section h3 {
			margin: 2rem 0 1rem;
			font-size: 1.5rem;
			color: var(--text-primary);
		}

		.season-selector {
			margin-bottom: 1.5rem;
		}

		.season-selector select {
			padding: 1rem 1.5rem;
			background: var(--bg-tertiary);
			color: var(--text-primary);
			border: 1px solid var(--border);
			border-radius: 12px;
			font-size: 1rem;
			cursor: pointer;
			transition: all 0.3s ease;
			min-width: 200px;
		}

		.season-selector select:focus {
			outline: none;
			border-color: var(--accent);
			box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.3);
		}

		.episodes-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
			gap: 1.5rem;
		}

		.episode-card {
			background: var(--bg-tertiary);
			border-radius: 16px;
			padding: 1.5rem;
			cursor: pointer;
			transition: all 0.15s ease;
			border: 1px solid var(--border);
			position: relative;
			overflow: hidden;
		}

		.episode-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 50%;
			width: 0%;
			height: 4px;
			background: var(--gradient);
			transition: all 0.15s ease;
			transform: translateX(-50%);
		}

		.episode-card:hover::before {
			width: 100%;
		}

		.episode-card:hover {
			background: var(--bg-secondary);
			transform: translateY(-4px);
			box-shadow: var(--shadow);
			border-color: var(--accent);
		}

		.episode-title {
			font-weight: 600;
			margin-bottom: 0.5rem;
			color: var(--text-primary);
			font-size: 1.1rem;
		}

		.episode-meta {
			color: var(--text-muted);
			font-size: 0.9rem;
			display: flex;
			gap: 0.5rem;
			align-items: center;
			margin-bottom: 0.75rem;
		}

		@media (max-width: 768px) {
			.hero {
				height: 60vh;
			}

			.hero-content {
				left: 5%;
				max-width: 90%;
			}

			.hero-title {
				font-size: 2rem;
			}

			.hero-description {
				font-size: 1rem;
			}

			.hero-buttons {
				flex-direction: column;
			}

			.content-section {
				padding: 2rem 1.5rem;
			}

			.section-title {
				font-size: 1.3rem;
			}

			.card {
				min-width: 200px;
			}

			.card-img {
				height: 300px;
			}

			.carousel-btn {
				display: none;
			}

			.content-info {
				grid-template-columns: 1fr;
			}

			.info-grid {
				grid-template-columns: 1fr;
			}

			.episodes-grid {
				grid-template-columns: 1fr;
			}
		}
	</style>
</head>

<body>
	<section class="hero">
		<div class="hero-slider" id="heroSlider"></div>
		<div class="slider-dots" id="sliderDots"></div>
	</section>

	<section class="content-section">
		<div class="section-header">
			<h2 class="section-title">Popular Movies</h2>
		</div>
		<div class="carousel-container">
			<button class="carousel-btn prev" onclick="scrollCarousel('movies', -1)">‹</button>
			<div class="carousel" id="movies"></div>
			<button class="carousel-btn next" onclick="scrollCarousel('movies', 1)">›</button>
		</div>
	</section>

	<section class="content-section">
		<div class="section-header">
			<h2 class="section-title">Popular TV Shows</h2>
		</div>
		<div class="carousel-container">
			<button class="carousel-btn prev" onclick="scrollCarousel('shows', -1)">‹</button>
			<div class="carousel" id="shows"></div>
			<button class="carousel-btn next" onclick="scrollCarousel('shows', 1)">›</button>
		</div>
	</section>

	<div class="popup" id="popup">
		<div class="popup-content">
			<div class="popup-header">
				<h2 id="popupTitle">Details</h2>
				<button class="close-btn" onclick="closePopup()">&times;</button>
			</div>
			<div class="popup-body" id="popupBody"></div>
		</div>
	</div>

	<script>
		const API_KEY = '79c1de8a90112f2951a563bb7ce87969';
		const IMG_BASE = 'https://image.tmdb.org/t/p/w500';
		const BACKDROP_BASE = 'https://image.tmdb.org/t/p/original';

		let heroItems = [];
		let currentSlide = 0;
		let slideInterval;
		let currentContent = null;
		let currentSeasons = [];

		async function loadHero() {
			try {
				const response = await fetch(`https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}`);
				const data = await response.json();
				heroItems = data.results.slice(0, 5).filter(item => item.backdrop_path);
				displayHero();
				startSlideshow();
			} catch (error) {
				console.error('Error loading hero:', error);
			}
		}

		function escapeHtml(text) {
			const div = document.createElement('div');
			div.textContent = text;
			return div.innerHTML;
		}

		function displayHero() {
			const slider = document.getElementById('heroSlider');
			const dots = document.getElementById('sliderDots');

			slider.innerHTML = heroItems.map((item, index) => {
				const title = escapeHtml(item.title || item.name || 'Untitled');
				const date = item.release_date || item.first_air_date;
				const year = date ? date.split('-')[0] : 'N/A';
				const type = item.media_type === 'movie' ? 'Movie' : 'TV Show';
				const overview = item.overview ? escapeHtml(item.overview.substring(0, 200)) + '...' : 'No description available.';

				return `
					<div class="hero-slide ${index === 0 ? 'active' : ''}" data-index="${index}">
						<img src="${BACKDROP_BASE}${item.backdrop_path}" alt="${title}" class="hero-bg" onerror="this.style.display='none'">
						<div class="hero-content">
							<h1 class="hero-title">${title}</h1>
							<div class="hero-meta">
								<span class="rating">⭐ ${item.vote_average ? item.vote_average.toFixed(1) : 'N/A'}</span>
								<span class="meta-item">${year}</span>
								<span class="meta-item">${type}</span>
							</div>
							<p class="hero-description">${overview}</p>
							<div class="hero-buttons">
								<button class="btn btn-play" onclick="openContentPopup(${item.id}, '${item.media_type}')">▶ Play Now</button>
							</div>
						</div>
					</div>
				`;
			}).join('');

			dots.innerHTML = heroItems.map((_, index) => 
				`<div class="dot ${index === 0 ? 'active' : ''}" onclick="goToSlide(${index})"></div>`
			).join('');
		}

		function startSlideshow() {
			if (slideInterval) clearInterval(slideInterval);
			slideInterval = setInterval(() => {
				nextSlide();
			}, 5000);
		}

		function nextSlide() {
			if (heroItems.length === 0) return;
			currentSlide = (currentSlide + 1) % heroItems.length;
			updateSlide();
		}

		function goToSlide(index) {
			currentSlide = index;
			updateSlide();
			clearInterval(slideInterval);
			startSlideshow();
		}

		function updateSlide() {
			const slides = document.querySelectorAll('.hero-slide');
			const dots = document.querySelectorAll('.dot');

			slides.forEach((slide, index) => {
				slide.classList.toggle('active', index === currentSlide);
			});

			dots.forEach((dot, index) => {
				dot.classList.toggle('active', index === currentSlide);
			});
		}

		async function loadSection(section, endpoint, type) {
			try {
				const response = await fetch(`https://api.themoviedb.org/3/${endpoint}?api_key=${API_KEY}&page=1`);
				const data = await response.json();
				const items = data.results.slice(0, 10).filter(item => item.poster_path);
				displayCards(items, section, type);
			} catch (error) {
				console.error(`Error loading ${section}:`, error);
			}
		}

		function displayCards(items, containerId, type) {
			const container = document.getElementById(containerId);
			container.innerHTML = items.map(item => {
				const title = escapeHtml(item.title || item.name || 'Untitled');
				const date = item.release_date || item.first_air_date;
				const year = date ? date.split('-')[0] : 'TBA';

				return `
					<div class="card" onclick="openContentPopup(${item.id}, '${type}')">
						<img src="${IMG_BASE}${item.poster_path}" alt="${title}" class="card-img" onerror="this.src='data:image/svg+xml,%3Csvg width=\'200\' height=\'300\' viewBox=\'0 0 200 300\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Crect width=\'200\' height=\'300\' fill=\'%23333\'/%3E%3Ctext x=\'100\' y=\'150\' fill=\'%23777\' text-anchor=\'middle\' font-family=\'Arial\' font-size=\'16\'%3ENo Image%3C/text%3E%3C/svg%3E'">
						<div class="card-overlay">
							<div class="card-title">${title}</div>
							<div class="card-meta">
								<span>${year}</span>
								<span class="card-rating">⭐ ${item.vote_average ? item.vote_average.toFixed(1) : 'N/A'}</span>
							</div>
						</div>
					</div>
				`;
			}).join('');
		}

		function scrollCarousel(section, direction) {
			const carousel = document.getElementById(section);
			const scrollAmount = 300;
			carousel.scrollBy({
				left: direction * scrollAmount,
				behavior: 'smooth'
			});
		}

		async function openContentPopup(id, type) {
			try {
				if (type === 'movie') {
					const response = await fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}`);
					const movie = await response.json();
					currentContent = movie;
					currentContent.media_type = 'movie';
					
					document.getElementById('popupTitle').textContent = movie.title;
					document.getElementById('popupBody').innerHTML = `
						<div class="content-info">
							<div class="content-poster">
								<img src="${IMG_BASE}${movie.poster_path}" alt="${movie.title}">
							</div>
							<div class="content-details">
								<h1>${movie.title}</h1>
								<p>${movie.overview || 'No overview available.'}</p>
								<div class="info-grid">
									<div class="info-item"><span>Status:</span><span>${movie.status}</span></div>
									<div class="info-item"><span>Rating:</span><span>⭐ ${movie.vote_average?.toFixed(1)}/10</span></div>
									<div class="info-item"><span>Runtime:</span><span>${movie.runtime} min</span></div>
									<div class="info-item"><span>Budget:</span><span>$${(movie.budget / 1000000).toFixed(1)}M</span></div>
									<div class="info-item"><span>Release Date:</span><span>${movie.release_date}</span></div>
									<div class="info-item"><span>Language:</span><span>${movie.original_language?.toUpperCase()}</span></div>
								</div>
								<button class="watch-btn" onclick="watchMovie()">▶ Watch Now</button>
							</div>
						</div>
					`;
				} else {
					const response = await fetch(`https://api.themoviedb.org/3/tv/${id}?api_key=${API_KEY}`);
					const show = await response.json();
					currentContent = show;
					currentContent.media_type = 'tv';
					currentSeasons = show.seasons?.filter(season => season.season_number > 0) || [];
					
					document.getElementById('popupTitle').textContent = show.name;
					document.getElementById('popupBody').innerHTML = `
						<div class="content-info">
							<div class="content-poster">
								<img src="${IMG_BASE}${show.poster_path}" alt="${show.name}">
							</div>
							<div class="content-details">
								<h1>${show.name}</h1>
								<p>${show.overview || 'No overview available.'}</p>
								<div class="info-grid">
									<div class="info-item"><span>Status:</span><span>${show.status}</span></div>
									<div class="info-item"><span>Rating:</span><span>⭐ ${show.vote_average?.toFixed(1)}/10</span></div>
									<div class="info-item"><span>Seasons:</span><span>${show.number_of_seasons}</span></div>
									<div class="info-item"><span>Episodes:</span><span>${show.number_of_episodes}</span></div>
									<div class="info-item"><span>First Aired:</span><span>${show.first_air_date}</span></div>
									<div class="info-item"><span>Language:</span><span>${show.original_language?.toUpperCase()}</span></div>
								</div>
							</div>
						</div>
						
						<div class="episodes-section">
							<h3>Episodes</h3>
							<div class="season-selector">
								<select id="seasonSelect" onchange="loadSeasonEpisodes()">
									${currentSeasons.map(season => 
										`<option value="${season.season_number}">Season ${season.season_number} (${season.episode_count} episodes)</option>`
									).join('')}
								</select>
							</div>
							<div class="episodes-grid" id="episodesGrid">
								<p>Loading episodes...</p>
							</div>
						</div>
					`;
					
					if (currentSeasons.length > 0) {
						setTimeout(() => loadSeasonEpisodes(), 100);
					}
				}
				
				document.getElementById('popup').classList.add('show');
			} catch (error) {
				console.error('Error loading content:', error);
			}
		}

		async function loadSeasonEpisodes() {
			const seasonNumber = document.getElementById('seasonSelect').value;
			const episodesGrid = document.getElementById('episodesGrid');
			
			episodesGrid.innerHTML = '<p>Loading episodes...</p>';
			
			try {
				const response = await fetch(`https://api.themoviedb.org/3/tv/${currentContent.id}/season/${seasonNumber}?api_key=${API_KEY}`);
				const season = await response.json();
				
				if (season.episodes && season.episodes.length > 0) {
					episodesGrid.innerHTML = season.episodes.map(episode => `
						<div class="episode-card" onclick="watchEpisode(${seasonNumber}, ${episode.episode_number})">
							<div class="episode-title">E${episode.episode_number}: ${episode.name}</div>
							<div class="episode-meta">
								${episode.air_date || 'TBA'} • ${episode.runtime || '?'} min
								${episode.vote_average ? `• ⭐ ${episode.vote_average.toFixed(1)}` : ''}
							</div>
							<p style="margin-top: 0.5rem; color: #a1a1aa; font-size: 0.9rem;">
								${episode.overview ? episode.overview.substring(0, 100) + '...' : 'No description available.'}
							</p>
						</div>
					`).join('');
				} else {
					episodesGrid.innerHTML = '<p>No episodes available for this season.</p>';
				}
			} catch (error) {
				console.error('Error loading episodes:', error);
				episodesGrid.innerHTML = '<p>Failed to load episodes.</p>';
			}
		}

		function watchMovie() {
			if (!currentContent) return;

			const overlay = document.createElement('div');
			overlay.style.cssText = `
				position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
				background: rgba(0,0,0,0.95); z-index: 10000; display: flex;
				align-items: center; justify-content: center; padding: 20px;
			`;

			const playerContainer = document.createElement('div');
			playerContainer.style.cssText = `
				width: 100%; max-width: 1200px; height: 80vh; background: #000;
				border-radius: 12px; overflow: hidden; position: relative;
			`;

			const closeBtn = document.createElement('button');
			closeBtn.innerHTML = '×';
			closeBtn.style.cssText = `
				position: absolute; top: 10px; right: 10px; z-index: 1;
				width: 40px; height: 40px; border: none; background: rgba(0,0,0,0.7);
				color: white; font-size: 20px; border-radius: 50%; cursor: pointer;
			`;
			closeBtn.onclick = () => document.body.removeChild(overlay);

			const iframe = document.createElement('iframe');
			iframe.src = `https://player.vidify.top/embed/movie/${currentContent.id}?autoplay=false&poster=true&chromecast=true&servericon=true&setting=true&pip=true&download=true&logourl=https%3A%2F%2Ffiles.catbox.moe%2Fd1ub0l.png&font=Roboto&fontcolor=6f63ff&fontsize=20&opacity=0.5&primarycolor=ff0000&secondarycolor=1f2937&iconcolor=ffffff`;
			iframe.style.cssText = 'width: 100%; height: 100%; border: none;';
			iframe.allowFullscreen = true;

			playerContainer.appendChild(closeBtn);
			playerContainer.appendChild(iframe);
			overlay.appendChild(playerContainer);
			document.body.appendChild(overlay);
		}

		function watchEpisode(season, episode) {
			if (!currentContent) return;

			const overlay = document.createElement('div');
			overlay.style.cssText = `
				position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
				background: rgba(0,0,0,0.95); z-index: 10000; display: flex;
				align-items: center; justify-content: center; padding: 20px;
			`;

			const playerContainer = document.createElement('div');
			playerContainer.style.cssText = `
				width: 100%; max-width: 1200px; height: 80vh; background: #000;
				border-radius: 12px; overflow: hidden; position: relative;
			`;

			const closeBtn = document.createElement('button');
			closeBtn.innerHTML = '×';
			closeBtn.style.cssText = `
				position: absolute; top: 10px; right: 10px; z-index: 1;
				width: 40px; height: 40px; border: none; background: rgba(0,0,0,0.7);
				color: white; font-size: 20px; border-radius: 50%; cursor: pointer;
			`;
			closeBtn.onclick = () => document.body.removeChild(overlay);

			const iframe = document.createElement('iframe');
			iframe.src = `https://player.vidify.top/embed/tv/${currentContent.id}/${season}/${episode}?autoplay=false&poster=true&chromecast=true&servericon=true&setting=true&pip=true&download=true&logourl=https%3A%2F%2Ffiles.catbox.moe%2Fd1ub0l.png&font=Roboto&fontcolor=6f63ff&fontsize=20&opacity=0.5&primarycolor=ff0000&secondarycolor=1f2937&iconcolor=ffffff`;
			iframe.style.cssText = 'width: 100%; height: 100%; border: none;';
			iframe.allowFullscreen = true;

			playerContainer.appendChild(closeBtn);
			playerContainer.appendChild(iframe);
			overlay.appendChild(playerContainer);
			document.body.appendChild(overlay);
		}

		function closePopup() {
			document.getElementById('popup').classList.remove('show');
		}

		document.getElementById('popup').addEventListener('click', (e) => {
			if (e.target.id === 'popup') closePopup();
		});

		loadHero();
		loadSection('movies', 'movie/popular', 'movie');
		loadSection('shows', 'tv/popular', 'tv');
	</script>
</body>

</html>
