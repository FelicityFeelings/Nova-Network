<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>TV Shows - Novaflix</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

		:root {
			--bg-primary: #0f0a0a;
			--bg-secondary: #1a0f0f;
			--bg-tertiary: #2a1818;
			--accent: #dc2626;
			--accent-secondary: #ef4444;
			--text-primary: #ffffff;
			--text-secondary: #a1a1aa;
			--text-muted: #71717a;
			--border: #3a1a1a;
			--gradient: linear-gradient(135deg, var(--accent), var(--accent-secondary));
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Inter', sans-serif;
			background: linear-gradient(135deg, #1a0a0a, #2e1a1a, #1e1616);
			color: var(--text-primary);
			min-height: 100vh;
			padding: 2rem;
		}

		::-webkit-scrollbar {
			width: 8px;
		}

		::-webkit-scrollbar-track {
			background: var(--bg-secondary);
		}

		::-webkit-scrollbar-thumb {
			background: var(--accent);
			border-radius: 4px;
		}

		.container {
			max-width: 1400px;
			margin: 0 auto;
		}

		.header {
			margin-bottom: 3rem;
			text-align: center;
		}

		.header h1 {
			font-size: 3rem;
			font-weight: 700;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			margin-bottom: 0.5rem;
		}

		.header p {
			color: var(--text-secondary);
			font-size: 1.1rem;
		}

		.back-btn {
			position: fixed;
			top: 2rem;
			left: 2rem;
			background: rgba(220, 38, 38, 0.1);
			border: 1px solid var(--accent);
			color: var(--text-primary);
			padding: 0.8rem 1.5rem;
			border-radius: 12px;
			cursor: pointer;
			font-size: 1rem;
			font-weight: 500;
			display: flex;
			align-items: center;
			gap: 0.5rem;
			transition: all 0.3s ease;
			z-index: 100;
		}

		.back-btn:hover {
			background: var(--accent);
			transform: translateX(-5px);
		}

		.categories-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
			gap: 1.5rem;
			margin-bottom: 2rem;
		}

		.category-card {
			background: var(--bg-secondary);
			border: 1px solid var(--border);
			border-radius: 16px;
			padding: 2rem 1.5rem;
			cursor: pointer;
			transition: all 0.3s ease;
			text-align: center;
			position: relative;
			overflow: hidden;
		}

		.category-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 4px;
			background: var(--gradient);
			transform: scaleX(0);
			transition: transform 0.3s ease;
		}

		.category-card:hover {
			transform: translateY(-5px);
			border-color: var(--accent);
			box-shadow: 0 10px 30px rgba(220, 38, 38, 0.3);
		}

		.category-card:hover::before {
			transform: scaleX(1);
		}

		.category-icon {
			font-size: 3rem;
			margin-bottom: 1rem;
			background: var(--gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.category-name {
			font-size: 1.2rem;
			font-weight: 600;
			color: var(--text-primary);
		}

		.results-section {
			display: none;
		}

		.results-section.active {
			display: block;
		}

		.results-header {
			display: flex;
			justify-content: flex-end;
			align-items: center;
			margin-bottom: 2rem;
		}

		.results-title {
			font-size: 2rem;
			font-weight: 700;
			color: var(--text-primary);
		}

		.shows-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
			gap: 2rem;
		}

		.show-card {
			background: var(--bg-secondary);
			border: 1px solid var(--border);
			border-radius: 16px;
			overflow: hidden;
			cursor: pointer;
			transition: all 0.15s ease;
			position: relative;
		}

		.show-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: var(--gradient);
			opacity: 0;
			transition: opacity 0.15s ease;
			z-index: 1;
		}

		.show-card:hover {
			transform: translateY(-8px) scale(1.02);
			box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
			border-color: var(--accent);
		}

		.show-card:hover::before {
			opacity: 0.1;
		}

		.show-poster {
			width: 100%;
			aspect-ratio: 2/3;
			object-fit: cover;
			background: var(--bg-tertiary);
			transition: transform 0.15s ease;
		}

		.show-card:hover .show-poster {
			transform: scale(1.05);
		}

		.card-hover-overlay {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: linear-gradient(to bottom, transparent 0%, transparent 60%, rgba(0, 0, 0, 0.9) 100%);
			opacity: 0;
			transition: opacity 0.15s ease;
			z-index: 3;
			display: flex;
			flex-direction: column;
			justify-content: flex-end;
			padding: 1.5rem;
			pointer-events: none;
		}

		.show-card:hover .card-hover-overlay {
			opacity: 1;
		}

		.card-hover-title {
			font-weight: 600;
			font-size: 1.1rem;
			color: var(--text-primary);
			margin-bottom: 0.5rem;
		}

		.card-hover-meta {
			color: var(--text-secondary);
			font-size: 0.9rem;
			display: flex;
			align-items: center;
			gap: 0.75rem;
			flex-wrap: wrap;
		}

		.card-hover-date {
			background: rgba(220, 38, 38, 0.2);
			padding: 0.25rem 0.5rem;
			border-radius: 6px;
			border: 1px solid rgba(220, 38, 38, 0.3);
		}

		.card-hover-rating {
			background: rgba(255, 215, 0, 0.2);
			padding: 0.25rem 0.5rem;
			border-radius: 6px;
			border: 1px solid rgba(255, 215, 0, 0.3);
			display: flex;
			align-items: center;
			gap: 0.25rem;
		}

		.popup {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			background: rgba(15, 10, 10, 0.95);
			backdrop-filter: blur(20px);
			display: none;
			align-items: center;
			justify-content: center;
			z-index: 1000;
			padding: 2rem;
			opacity: 0;
			transition: opacity 0.3s ease;
		}

		.popup.show {
			display: flex;
			opacity: 1;
		}

		.popup-content {
			background: var(--bg-secondary);
			border: 1px solid var(--border);
			border-radius: 24px;
			max-width: 1000px;
			width: 100%;
			max-height: 90vh;
			overflow-y: auto;
			box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
			transform: scale(0.9);
			transition: transform 0.3s ease;
		}

		.popup.show .popup-content {
			transform: scale(1);
		}

		.popup-header {
			padding: 2rem;
			display: flex;
			justify-content: space-between;
			align-items: start;
			border-bottom: 1px solid var(--border);
			background: var(--bg-tertiary);
			border-radius: 24px 24px 0 0;
		}

		.popup-body {
			padding: 2rem;
		}

		.close-btn {
			background: var(--bg-tertiary);
			border: 1px solid var(--border);
			color: var(--text-primary);
			font-size: 1.5rem;
			cursor: pointer;
			width: 40px;
			height: 40px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
		}

		.close-btn:hover {
			background: var(--accent);
			transform: scale(1.1) rotate(90deg);
		}

		.media-info {
			display: grid;
			grid-template-columns: 240px 1fr;
			gap: 2rem;
			margin-bottom: 2rem;
		}

		.media-poster img {
			width: 100%;
			border-radius: 16px;
			box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
			border: 1px solid var(--border);
		}

		.media-details h1 {
			margin-bottom: 0.5rem;
			font-size: 2rem;
			font-weight: 700;
		}

		.media-details p {
			color: var(--text-secondary);
			margin: 1rem 0;
			line-height: 1.7;
		}

		.info-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem;
			margin: 1.5rem 0;
		}

		.info-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 1rem;
			background: var(--bg-tertiary);
			border-radius: 12px;
			border: 1px solid var(--border);
			transition: all 0.15s ease;
		}

		.info-item:hover {
			border-color: var(--accent);
			transform: translateY(-2px);
		}

		.info-item span:first-child {
			color: var(--text-muted);
			font-weight: 500;
		}

		.info-item span:last-child {
			color: var(--text-primary);
			font-weight: 600;
		}

		.seasons-section {
			margin-top: 2rem;
			padding-top: 2rem;
			border-top: 1px solid var(--border);
		}

		.seasons-title {
			font-size: 1.5rem;
			font-weight: 600;
			margin-bottom: 1rem;
			color: var(--text-primary);
		}

		.seasons-list {
			display: flex;
			gap: 0.5rem;
			flex-wrap: wrap;
			margin-bottom: 1rem;
		}

		.season-btn {
			padding: 0.75rem 1.5rem;
			background: var(--bg-tertiary);
			border: 1px solid var(--border);
			color: var(--text-secondary);
			border-radius: 8px;
			cursor: pointer;
			font-size: 0.95rem;
			font-weight: 500;
			transition: all 0.15s ease;
		}

		.season-btn:hover {
			border-color: var(--accent);
			color: var(--text-primary);
		}

		.season-btn.active {
			background: var(--gradient);
			border-color: var(--accent);
			color: var(--text-primary);
		}

		.episodes-grid {
			display: grid;
			gap: 1rem;
			max-height: 400px;
			overflow-y: auto;
			padding-right: 0.5rem;
		}

		.episode-card {
			background: var(--bg-tertiary);
			border: 1px solid var(--border);
			border-radius: 12px;
			padding: 1rem;
			cursor: pointer;
			transition: all 0.15s ease;
			display: grid;
			grid-template-columns: 120px 1fr;
			gap: 1rem;
		}

		.episode-card:hover {
			border-color: var(--accent);
			transform: translateX(5px);
		}

		.episode-thumbnail {
			width: 120px;
			aspect-ratio: 16/9;
			border-radius: 8px;
			object-fit: cover;
			background: var(--bg-secondary);
		}

		.episode-info h4 {
			font-size: 1rem;
			font-weight: 600;
			margin-bottom: 0.25rem;
		}

		.episode-info p {
			font-size: 0.85rem;
			color: var(--text-muted);
			margin: 0;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
		}

		.episode-meta {
			display: flex;
			gap: 1rem;
			margin-top: 0.5rem;
			font-size: 0.85rem;
			color: var(--text-secondary);
		}

		.watch-btn {
			width: 100%;
			padding: 1.5rem;
			margin-top: 1.5rem;
			background: var(--gradient);
			color: var(--text-primary);
			border: none;
			border-radius: 12px;
			font-size: 1.1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			text-transform: uppercase;
			letter-spacing: 1px;
		}

		.watch-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(220, 38, 38, 0.5);
		}

		.loading {
			text-align: center;
			padding: 3rem;
			font-size: 1.2rem;
			color: var(--text-secondary);
		}

		.loading i {
			font-size: 2rem;
			color: var(--accent);
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			to {
				transform: rotate(360deg);
			}
		}

		@media (max-width: 768px) {
			body {
				padding: 1rem;
			}

			.header h1 {
				font-size: 2rem;
			}

			.back-btn {
				top: 1rem;
				left: 1rem;
				padding: 0.6rem 1rem;
				font-size: 0.9rem;
			}

			.categories-grid {
				grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
				gap: 1rem;
			}

			.category-card {
				padding: 1.5rem 1rem;
			}

			.shows-grid {
				grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
				gap: 1rem;
			}

			.card-hover-overlay {
				display: none;
			}

			.media-info {
				grid-template-columns: 1fr;
				gap: 1rem;
			}

			.info-grid {
				grid-template-columns: 1fr;
			}

			.episode-card {
				grid-template-columns: 1fr;
			}

			.episode-thumbnail {
				width: 100%;
			}

			.popup {
				padding: 1rem;
			}

			.popup-content {
				border-radius: 16px;
			}

			.popup-header {
				padding: 1.5rem;
				border-radius: 16px 16px 0 0;
			}

			.popup-body {
				padding: 1.5rem;
			}
		}
	</style>
</head>

<body>
	<div class="container">
		<button class="back-btn" onclick="goBack()" style="display: none;">
			<i class="fas fa-arrow-left"></i>
			<span>Back to Categories</span>
		</button>

		<div id="categoriesView">
			<div class="header">
				<h1>Browse TV Shows</h1>
				<p>Discover shows by genre</p>
			</div>

			<div class="categories-grid" id="categoriesGrid">
				<div class="loading">
					<i class="fas fa-spinner"></i>
					<p>Loading categories...</p>
				</div>
			</div>
		</div>

		<div id="resultsView" class="results-section">
			<div class="results-header">
				<h2 class="results-title" id="resultsTitle"></h2>
			</div>
			<div class="shows-grid" id="showsGrid">
				<div class="loading">
					<i class="fas fa-spinner"></i>
					<p>Loading content...</p>
				</div>
			</div>
		</div>
	</div>

	<div class="popup" id="popup">
		<div class="popup-content">
			<div class="popup-header">
				<h2 id="popupTitle">Details</h2>
				<button class="close-btn" onclick="closePopup()">&times;</button>
			</div>
			<div class="popup-body" id="popupBody"></div>
		</div>
	</div>

	<script>
		const API_KEY = '79c1de8a90112f2951a563bb7ce87969';
		const BASE_URL = 'https://api.themoviedb.org/3';
		const IMAGE_BASE = 'https://image.tmdb.org/t/p/w500';

		const genres = [
			{ id: 10759, name: 'Action & Adventure', icon: 'fa-gun' },
			{ id: 16, name: 'Animation', icon: 'fa-palette' },
			{ id: 35, name: 'Comedy', icon: 'fa-face-laugh' },
			{ id: 80, name: 'Crime', icon: 'fa-user-secret' },
			{ id: 99, name: 'Documentary', icon: 'fa-file-video' },
			{ id: 18, name: 'Drama', icon: 'fa-masks-theater' },
			{ id: 10751, name: 'Family', icon: 'fa-people-roof' },
			{ id: 10762, name: 'Kids', icon: 'fa-child' },
			{ id: 9648, name: 'Mystery', icon: 'fa-magnifying-glass' },
			{ id: 10763, name: 'News', icon: 'fa-newspaper' },
			{ id: 10764, name: 'Reality', icon: 'fa-video' },
			{ id: 10765, name: 'Sci-Fi & Fantasy', icon: 'fa-rocket' },
			{ id: 10766, name: 'Soap', icon: 'fa-heart' },
			{ id: 10767, name: 'Talk', icon: 'fa-comments' },
			{ id: 10768, name: 'War & Politics', icon: 'fa-landmark' },
			{ id: 37, name: 'Western', icon: 'fa-horse' }
		];

		let currentGenre = null;
		let currentShow = null;
		let currentSeasons = [];
		let selectedSeason = 1;

		function loadCategories() {
			const grid = document.getElementById('categoriesGrid');
			grid.innerHTML = '';

			genres.forEach(genre => {
				const card = document.createElement('div');
				card.className = 'category-card';
				card.onclick = () => loadGenreContent(genre);
				card.innerHTML = `
					<div class="category-icon">
						<i class="fas ${genre.icon}"></i>
					</div>
					<div class="category-name">${genre.name}</div>
				`;
				grid.appendChild(card);
			});
		}

		async function loadGenreContent(genre) {
			currentGenre = genre;
			
			document.getElementById('categoriesView').style.display = 'none';
			document.getElementById('resultsView').classList.add('active');
			document.querySelector('.back-btn').style.display = 'flex';
			document.getElementById('resultsTitle').textContent = genre.name;

			const showsGrid = document.getElementById('showsGrid');
			showsGrid.innerHTML = `
				<div class="loading">
					<i class="fas fa-spinner"></i>
					<p>Loading ${genre.name} shows...</p>
				</div>
			`;

			try {
				const response = await fetch(
					`${BASE_URL}/discover/tv?api_key=${API_KEY}&with_genres=${genre.id}&sort_by=popularity.desc&page=1`
				);
				const data = await response.json();
				displayShows(data.results);
			} catch (error) {
				showsGrid.innerHTML = `
					<div class="loading">
						<p>Error loading content. Please try again.</p>
					</div>
				`;
			}
		}

		function displayShows(shows) {
			const grid = document.getElementById('showsGrid');
			grid.innerHTML = '';

			shows.forEach(show => {
				const card = document.createElement('div');
				card.className = 'show-card';
				card.onclick = () => openShowPopup(show.id);
				
				const posterPath = show.poster_path 
					? IMAGE_BASE + show.poster_path 
					: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDIwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTUwIiBmaWxsPSIjNzc3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5ObyBJbWFnZTwvdGV4dD4KPC9zdmc+';

				card.innerHTML = `
					<img src="${posterPath}" alt="${show.name}" class="show-poster">
					<div class="card-hover-overlay">
						<div class="card-hover-title">${show.name}</div>
						<div class="card-hover-meta">
							<div class="card-hover-date">${show.first_air_date ? show.first_air_date.split('-')[0] : 'TBA'}</div>
							<div class="card-hover-rating">⭐ ${show.vote_average ? show.vote_average.toFixed(1) : 'N/A'}</div>
						</div>
					</div>
				`;
				grid.appendChild(card);
			});
		}

		async function openShowPopup(id) {
			try {
				const response = await fetch(`${BASE_URL}/tv/${id}?api_key=${API_KEY}`);
				const show = await response.json();
				currentShow = show;
				currentSeasons = show.seasons || [];
				selectedSeason = currentSeasons.find(s => s.season_number > 0)?.season_number || 1;
				
				document.getElementById('popupTitle').textContent = show.name;
				
				const seasonButtons = currentSeasons
					.filter(s => s.season_number > 0)
					.map(s => `
						<button class="season-btn ${s.season_number === selectedSeason ? 'active' : ''}" 
								onclick="selectSeason(${s.season_number})">
							Season ${s.season_number}
						</button>
					`).join('');

				document.getElementById('popupBody').innerHTML = `
					<div class="media-info">
						<div class="media-poster">
							<img src="${IMAGE_BASE}${show.poster_path}" alt="${show.name}">
						</div>
						<div class="media-details">
							<h1>${show.name}</h1>
							<p>${show.overview || 'No overview available.'}</p>
							<div class="info-grid">
								<div class="info-item"><span>Status:</span><span>${show.status}</span></div>
								<div class="info-item"><span>Rating:</span><span>⭐ ${show.vote_average?.toFixed(1)}/10</span></div>
								<div class="info-item"><span>Seasons:</span><span>${show.number_of_seasons}</span></div>
								<div class="info-item"><span>Episodes:</span><span>${show.number_of_episodes}</span></div>
								<div class="info-item"><span>First Air Date:</span><span>${show.first_air_date}</span></div>
								<div class="info-item"><span>Language:</span><span>${show.original_language?.toUpperCase()}</span></div>
							</div>
						</div>
					</div>
					<div class="seasons-section">
						<h3 class="seasons-title">Episodes</h3>
						<div class="seasons-list">
							${seasonButtons}
						</div>
						<div class="episodes-grid" id="episodesGrid">
							<div class="loading">
								<i class="fas fa-spinner"></i>
								<p>Loading episodes...</p>
							</div>
						</div>
					</div>
				`;
				
				document.getElementById('popup').classList.add('show');
				loadEpisodes(id, selectedSeason);
			} catch (error) {
				console.error('Error loading show:', error);
			}
		}

		async function selectSeason(seasonNum) {
			selectedSeason = seasonNum;
			document.querySelectorAll('.season-btn').forEach(btn => {
				btn.classList.remove('active');
			});
			event.target.classList.add('active');
			loadEpisodes(currentShow.id, seasonNum);
		}

		async function loadEpisodes(showId, seasonNum) {
			const episodesGrid = document.getElementById('episodesGrid');
			episodesGrid.innerHTML = `
				<div class="loading">
					<i class="fas fa-spinner"></i>
					<p>Loading episodes...</p>
				</div>
			`;

			try {
				const response = await fetch(
					`${BASE_URL}/tv/${showId}/season/${seasonNum}?api_key=${API_KEY}`
				);
				const data = await response.json();
				
				episodesGrid.innerHTML = '';
				data.episodes.forEach(episode => {
					const episodeCard = document.createElement('div');
					episodeCard.className = 'episode-card';
					episodeCard.onclick = () => watchEpisode(episode.episode_number);
					
					const stillPath = episode.still_path 
						? IMAGE_BASE + episode.still_path 
						: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjgwIiB5PSI0NSIgZmlsbD0iIzc3NyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Tm8gSW1hZ2U8L3RleHQ+Cjwvc3ZnPg==';

					episodeCard.innerHTML = `
						<img src="${stillPath}" alt="Episode ${episode.episode_number}" class="episode-thumbnail">
						<div class="episode-info">
							<h4>Episode ${episode.episode_number}: ${episode.name}</h4>
							<p>${episode.overview || 'No description available.'}</p>
							<div class="episode-meta">
								<span>⭐ ${episode.vote_average ? episode.vote_average.toFixed(1) : 'N/A'}</span>
								<span>${episode.runtime ? episode.runtime + ' min' : ''}</span>
								<span>${episode.air_date || ''}</span>
							</div>
						</div>
					`;
					episodesGrid.appendChild(episodeCard);
				});
			} catch (error) {
				episodesGrid.innerHTML = `
					<div class="loading">
						<p>Error loading episodes.</p>
					</div>
				`;
			}
		}

		function watchEpisode(episodeNum) {
			if (!currentShow) return;

			const overlay = document.createElement('div');
			overlay.style.cssText = `
				position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
				background: rgba(0,0,0,0.95); z-index: 10000; display: flex;
				align-items: center; justify-content: center; padding: 20px;
			`;

			const playerContainer = document.createElement('div');
			playerContainer.style.cssText = `
				width: 100%; max-width: 1200px; height: 80vh; background: #000;
				border-radius: 12px; overflow: hidden; position: relative;
			`;

			const closeBtn = document.createElement('button');
			closeBtn.innerHTML = '×';
			closeBtn.style.cssText = `
				position: absolute; top: 10px; right: 10px; z-index: 1;
				width: 40px; height: 40px; border: none; background: rgba(0,0,0,0.7);
				color: white; font-size: 20px; border-radius: 50%; cursor: pointer;
			`;
			closeBtn.onclick = () => document.body.removeChild(overlay);

			const iframe = document.createElement('iframe');
			iframe.src = `https://player.vidify.top/embed/tv/${currentShow.id}/${selectedSeason}/${episodeNum}?autoplay=false&poster=true&chromecast=true&servericon=true&setting=true&pip=true&download=true&logourl=https%3A%2F%2Ffiles.catbox.moe%2Fd1ub0l.png&font=Roboto&fontcolor=6f63ff&fontsize=20&opacity=0.5&primarycolor=ff0000&secondarycolor=1f2937&iconcolor=ffffff`;
			iframe.style.cssText = 'width: 100%; height: 100%; border: none;';
			iframe.allowFullscreen = true;
			iframe.frameBorder = '0';

			playerContainer.appendChild(closeBtn);
			playerContainer.appendChild(iframe);
			overlay.appendChild(playerContainer);
			document.body.appendChild(overlay);
		}

		function closePopup() {
			document.getElementById('popup').classList.remove('show');
		}

		function goBack() {
			document.getElementById('categoriesView').style.display = 'block';
			document.getElementById('resultsView').classList.remove('active');
			document.querySelector('.back-btn').style.display = 'none';
			currentGenre = null;
		}

		document.getElementById('popup').addEventListener('click', (e) => {
			if (e.target.id === 'popup') closePopup();
		});

		// Initialize
		loadCategories();
	</script>
</body>

</html>
