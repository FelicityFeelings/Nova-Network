<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>YouTube Clone</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			background: #000;
		}

		.line-clamp-2 {
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
		}

		.spinner {
			border: 4px solid rgba(239, 68, 68, 0.3);
			border-top: 4px solid rgb(220, 38, 38);
			border-radius: 50%;
			width: 40px;
			height: 40px;
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			0% {
				transform: rotate(0deg);
			}

			100% {
				transform: rotate(360deg);
			}
		}
	</style>
</head>

<body class="bg-black text-white">
	<!-- Header -->
	<header class="bg-black border-b border-red-900 px-6 py-3 sticky top-0 z-50">
		<div class="max-w-[1800px] mx-auto flex items-center justify-between">
			<button id="logo" class="text-2xl font-bold text-red-600 hover:text-red-500 transition-colors flex items-center gap-2">
                <span class="text-3xl">▶</span> YouTube
            </button>

			<div class="flex-1 max-w-2xl mx-8">
				<div
					class="flex items-center bg-zinc-900 rounded-full overflow-hidden border border-red-900 focus-within:border-red-600">
					<input
                        type="text"
                        id="searchInput"
                        placeholder="Search"
                        class="flex-1 bg-transparent px-6 py-2.5 outline-none text-white placeholder-gray-500"
                    />
					<button id="searchBtn" class="px-6 py-2.5 bg-red-600 hover:bg-red-700 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </button>
				</div>
			</div>
		</div>
	</header>

	<!-- Main Content -->
	<main class="flex-1">
		<!-- Video Grid View -->
		<div id="gridView" class="p-6">
			<div class="max-w-[1800px] mx-auto">
				<div id="loading" class="flex justify-center items-center h-64">
					<div class="flex items-center gap-3 text-xl text-gray-400">
						<div class="spinner"></div>
						Loading videos...
					</div>
				</div>
				<div id="videoGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 hidden">
				</div>
			</div>
		</div>

		<!-- Video Player View -->
		<div id="playerView" class="hidden p-6">
			<div class="max-w-[1800px] mx-auto flex gap-6">
				<div class="flex-1">
					<div id="videoPlayer"
						class="aspect-video bg-black rounded-xl overflow-hidden mb-4 shadow-2xl border border-red-900">
					</div>
					<h1 id="videoTitle" class="text-xl font-bold mb-3"></h1>

					<div class="bg-zinc-900 rounded-xl p-4 mb-4 border border-red-900">
						<div class="flex items-center justify-between mb-3">
							<div class="flex items-center gap-3">
								<div id="channelAvatar"
									class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold">
								</div>
								<div>
									<h3 id="channelTitle" class="font-semibold"></h3>
								</div>
							</div>
							<div class="flex items-center gap-4 text-gray-300">
								<div class="flex items-center gap-2 bg-red-600 px-4 py-2 rounded-full">
									<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
											d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
									</svg>
									<span id="likeCount" class="font-semibold"></span>
								</div>
							</div>
						</div>

						<div class="flex items-center gap-4 text-sm text-gray-400 mb-3">
							<div class="flex items-center gap-1">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
										d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
										d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
								</svg>
								<span id="viewCount"></span>
							</div>
							<span>•</span>
							<div class="flex items-center gap-1">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
										d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
								</svg>
								<span id="publishDate"></span>
							</div>
						</div>

						<p id="videoDescription" class="text-gray-300 text-sm whitespace-pre-wrap leading-relaxed"></p>
					</div>
				</div>

				<div class="w-96">
					<h2 class="text-lg font-semibold mb-4 text-red-500">Related Videos</h2>
					<div id="relatedVideos" class="space-y-3"></div>
				</div>
			</div>
		</div>
	</main>

	<script>
		const API_KEY = 'AIzaSyDr-HBIhsKd7HU7wkChRIL2wDmsUBdWkdk';
        let currentVideos = [];
        let selectedVideo = null;

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const logo = document.getElementById('logo');
        const loading = document.getElementById('loading');
        const videoGrid = document.getElementById('videoGrid');
        const gridView = document.getElementById('gridView');
        const playerView = document.getElementById('playerView');

        // Utility Functions
        function formatNumber(num) {
            if (!num) return '0';
            const n = parseInt(num);
            if (n >= 1000000000) return (n / 1000000000).toFixed(1) + 'B';
            if (n >= 1000000) return (n / 1000000).toFixed(1) + 'M';
            if (n >= 1000) return (n / 1000).toFixed(1) + 'K';
            return n.toString();
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return 'Today';
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
            if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
            return `${Math.floor(diffDays / 365)} years ago`;
        }

        function parseDuration(duration) {
            if (!duration) return '0:00';
            const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
            if (!match) return '0:00';
            const hours = (match[1] || '').replace('H', '');
            const minutes = (match[2] || '').replace('M', '');
            const seconds = (match[3] || '').replace('S', '');
            
            if (hours) {
                return `${hours}:${minutes.padStart(2, '0')}:${seconds.padStart(2, '0')}`;
            }
            return `${minutes || '0'}:${seconds.padStart(2, '0')}`;
        }

        // Fetch Videos
        async function fetchTrendingVideos() {
            loading.classList.remove('hidden');
            videoGrid.classList.add('hidden');
            
            try {
                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics,contentDetails&chart=mostPopular&maxResults=32&regionCode=US&key=${API_KEY}`
                );
                const data = await response.json();
                
                if (data.items) {
                    currentVideos = data.items;
                    displayVideos(data.items);
                }
            } catch (error) {
                console.error('Error fetching videos:', error);
            }
            
            loading.classList.add('hidden');
        }

        async function searchVideos() {
            const query = searchInput.value.trim();
            if (!query) return;
            
            loading.classList.remove('hidden');
            videoGrid.classList.add('hidden');
            
            try {
                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=32&q=${encodeURIComponent(query)}&type=video&key=${API_KEY}`
                );
                const data = await response.json();
                
                if (data.items) {
                    const videoIds = data.items.map(item => item.id.videoId).join(',');
                    const statsResponse = await fetch(
                        `https://www.googleapis.com/youtube/v3/videos?part=statistics,contentDetails&id=${videoIds}&key=${API_KEY}`
                    );
                    const statsData = await statsResponse.json();
                    
                    const videosWithStats = data.items.map((item, index) => ({
                        id: item.id.videoId,
                        snippet: item.snippet,
                        statistics: statsData.items[index]?.statistics || {},
                        contentDetails: statsData.items[index]?.contentDetails || {}
                    }));
                    
                    currentVideos = videosWithStats;
                    displayVideos(videosWithStats);
                }
            } catch (error) {
                console.error('Error searching videos:', error);
            }
            
            loading.classList.add('hidden');
        }

        async function fetchRelatedVideos(videoId) {
            const relatedVideos = document.getElementById('relatedVideos');
            relatedVideos.innerHTML = '<div class="text-gray-400 text-sm">Loading related videos...</div>';
            
            try {
                // First try to get related videos
                let response = await fetch(
                    `https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=${videoId}&type=video&maxResults=20&key=${API_KEY}`
                );
                let data = await response.json();
                
                // If no related videos, fall back to trending videos
                if (!data.items || data.items.length === 0) {
                    response = await fetch(
                        `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics,contentDetails&chart=mostPopular&maxResults=20&regionCode=US&key=${API_KEY}`
                    );
                    data = await response.json();
                    
                    if (data.items) {
                        displayRelatedVideos(data.items);
                    }
                } else {
                    const videoIds = data.items.map(item => item.id.videoId).join(',');
                    const statsResponse = await fetch(
                        `https://www.googleapis.com/youtube/v3/videos?part=statistics,contentDetails&id=${videoIds}&key=${API_KEY}`
                    );
                    const statsData = await statsResponse.json();
                    
                    const videosWithStats = data.items.map((item, index) => ({
                        id: item.id.videoId,
                        snippet: item.snippet,
                        statistics: statsData.items[index]?.statistics || {},
                        contentDetails: statsData.items[index]?.contentDetails || {}
                    }));
                    
                    displayRelatedVideos(videosWithStats);
                }
            } catch (error) {
                console.error('Error fetching related videos:', error);
                // On error, try to show trending videos
                try {
                    const response = await fetch(
                        `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics,contentDetails&chart=mostPopular&maxResults=20&regionCode=US&key=${API_KEY}`
                    );
                    const data = await response.json();
                    if (data.items) {
                        displayRelatedVideos(data.items);
                    }
                } catch (err) {
                    relatedVideos.innerHTML = '<div class="text-gray-400 text-sm">Error loading videos</div>';
                }
            }
        }

        // Display Functions
        function displayVideos(videos) {
            videoGrid.innerHTML = '';
            videoGrid.classList.remove('hidden');
            
            videos.forEach(video => {
                const videoId = video.id?.videoId || video.id;
                
                const videoCard = document.createElement('div');
                videoCard.className = 'cursor-pointer group';
                videoCard.onclick = () => playVideo(video);
                
                videoCard.innerHTML = `
                    <div class="relative aspect-video bg-zinc-900 rounded-xl overflow-hidden mb-3 border border-red-900">
                        <img src="${video.snippet.thumbnails.high.url}" alt="${video.snippet.title}" 
                             class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"/>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-80 transition-opacity"></div>
                        <svg class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 text-red-600 opacity-0 group-hover:opacity-100 transition-all scale-75 group-hover:scale-100" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        ${video.contentDetails?.duration ? `<div class="absolute bottom-2 right-2 bg-black bg-opacity-90 text-xs font-semibold px-2 py-1 rounded border border-red-900">${parseDuration(video.contentDetails.duration)}</div>` : ''}
                    </div>
                    <div class="flex gap-3">
                        <div class="w-9 h-9 bg-gradient-to-br from-red-600 to-red-800 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0">
                            ${video.snippet.channelTitle[0]}
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="font-semibold line-clamp-2 mb-1 group-hover:text-red-500 transition-colors">
                                ${video.snippet.title}
                            </h3>
                            <p class="text-sm text-gray-400 mb-1">${video.snippet.channelTitle}</p>
                            <div class="flex items-center gap-2 text-xs text-gray-500">
                                <span>${formatNumber(video.statistics?.viewCount)} views</span>
                                <span>•</span>
                                <span>${formatDate(video.snippet.publishedAt)}</span>
                            </div>
                        </div>
                    </div>
                `;
                
                videoGrid.appendChild(videoCard);
            });
        }

        function displayRelatedVideos(videos) {
            const relatedVideos = document.getElementById('relatedVideos');
            relatedVideos.innerHTML = '';
            
            videos.forEach(video => {
                const videoId = video.id?.videoId || video.id;
                
                const videoCard = document.createElement('div');
                videoCard.className = 'flex gap-2 cursor-pointer group';
                videoCard.onclick = () => playVideo(video);
                
                videoCard.innerHTML = `
                    <div class="relative w-40 aspect-video bg-zinc-900 rounded-lg overflow-hidden flex-shrink-0 border border-red-900">
                        <img src="${video.snippet.thumbnails.medium.url}" alt="${video.snippet.title}" 
                             class="w-full h-full object-cover group-hover:scale-105 transition-transform"/>
                        ${video.contentDetails?.duration ? `<div class="absolute bottom-1 right-1 bg-black bg-opacity-90 text-xs px-1 py-0.5 rounded border border-red-900">${parseDuration(video.contentDetails.duration)}</div>` : ''}
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="font-medium text-sm line-clamp-2 mb-1 group-hover:text-red-500 transition-colors">${video.snippet.title}</h3>
                        <p class="text-xs text-gray-400 mb-1">${video.snippet.channelTitle}</p>
                        <div class="text-xs text-gray-500">${formatNumber(video.statistics?.viewCount)} views</div>
                    </div>
                `;
                
                relatedVideos.appendChild(videoCard);
            });
        }

        function playVideo(video) {
            const videoId = video.id?.videoId || video.id;
            selectedVideo = { id: videoId, ...video };
            
            gridView.classList.add('hidden');
            playerView.classList.remove('hidden');
            window.scrollTo(0, 0);
            
            document.getElementById('videoPlayer').innerHTML = `
                <iframe width="100%" height="100%" 
                        src="https://www.youtube.com/embed/${videoId}?autoplay=1" 
                        title="${video.snippet.title}"
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
            `;
            
            document.getElementById('videoTitle').textContent = video.snippet.title;
            document.getElementById('channelAvatar').className = 'w-10 h-10 bg-gradient-to-br from-red-600 to-red-800 rounded-full flex items-center justify-center text-white font-bold';
            document.getElementById('channelAvatar').textContent = video.snippet.channelTitle[0];
            document.getElementById('channelTitle').textContent = video.snippet.channelTitle;
            document.getElementById('likeCount').textContent = formatNumber(video.statistics?.likeCount);
            document.getElementById('viewCount').textContent = formatNumber(video.statistics?.viewCount) + ' views';
            document.getElementById('publishDate').textContent = formatDate(video.snippet.publishedAt);
            document.getElementById('videoDescription').textContent = video.snippet.description;
            
            fetchRelatedVideos(videoId);
        }

        function goHome() {
            gridView.classList.remove('hidden');
            playerView.classList.add('hidden');
            selectedVideo = null;
            document.getElementById('videoPlayer').innerHTML = '';
        }

        // Event Listeners
        searchBtn.addEventListener('click', searchVideos);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchVideos();
        });
        logo.addEventListener('click', goHome);

        // Initialize
        fetchTrendingVideos();
	</script>
</body>

</html>
