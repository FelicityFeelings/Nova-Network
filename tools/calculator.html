<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Calculator</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
			display: flex;
			justify-content: center;
			align-items: center;
			min-height: 100vh;
			background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
			padding: 20px;
		}

		.calculator {
			background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
			border-radius: 30px;
			padding: 30px;
			box-shadow:
				0 30px 60px rgba(0, 0, 0, 0.5),
				inset 0 1px 0 rgba(255, 255, 255, 0.1);
			width: 100%;
			max-width: 400px;
			border: 1px solid rgba(255, 255, 255, 0.1);
		}

		.display {
			background: linear-gradient(145deg, #0a0a0a, #1a1a1a);
			color: #fff;
			padding: 30px 25px;
			border-radius: 20px;
			margin-bottom: 25px;
			text-align: right;
			min-height: 120px;
			display: flex;
			flex-direction: column;
			justify-content: flex-end;
			box-shadow:
				inset 0 4px 8px rgba(0, 0, 0, 0.5),
				inset 0 -2px 4px rgba(255, 255, 255, 0.05);
			border: 1px solid rgba(255, 255, 255, 0.05);
		}

		.previous {
			font-size: 18px;
			color: #666;
			min-height: 24px;
			margin-bottom: 8px;
			font-weight: 300;
		}

		.current {
			font-size: 48px;
			font-weight: 300;
			word-wrap: break-word;
			word-break: break-all;
			letter-spacing: -1px;
			text-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
		}

		.buttons {
			display: grid;
			grid-template-columns: repeat(4, 1fr);
			gap: 12px;
			grid-template-areas:
				"clear delete percent divide"
				"seven eight nine multiply"
				"four five six subtract"
				"one two three add"
				"zero zero decimal equals";
		}

		button {
			padding: 25px;
			font-size: 22px;
			border: none;
			border-radius: 18px;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			font-weight: 500;
			background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
			color: #fff;
			box-shadow:
				4px 4px 8px rgba(0, 0, 0, 0.4),
				-2px -2px 6px rgba(255, 255, 255, 0.05);
			border: 1px solid rgba(255, 255, 255, 0.1);
			position: relative;
			overflow: hidden;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.btn-clear {
			grid-area: clear;
		}

		.btn-delete {
			grid-area: delete;
		}

		.btn-percent {
			grid-area: percent;
		}

		.btn-divide {
			grid-area: divide;
		}

		.btn-seven {
			grid-area: seven;
		}

		.btn-eight {
			grid-area: eight;
		}

		.btn-nine {
			grid-area: nine;
		}

		.btn-multiply {
			grid-area: multiply;
		}

		.btn-four {
			grid-area: four;
		}

		.btn-five {
			grid-area: five;
		}

		.btn-six {
			grid-area: six;
		}

		.btn-subtract {
			grid-area: subtract;
		}

		.btn-one {
			grid-area: one;
		}

		.btn-two {
			grid-area: two;
		}

		.btn-three {
			grid-area: three;
		}

		.btn-add {
			grid-area: add;
		}

		.btn-zero {
			grid-area: zero;
		}

		.btn-decimal {
			grid-area: decimal;
		}

		.btn-equals {
			grid-area: equals;
		}

		button::before {
			content: '';
			position: absolute;
			top: 50%;
			left: 50%;
			width: 0;
			height: 0;
			border-radius: 50%;
			background: rgba(255, 255, 255, 0.1);
			transform: translate(-50%, -50%);
			transition: width 0.6s, height 0.6s;
		}

		button:active::before {
			width: 300px;
			height: 300px;
		}

		button:hover {
			transform: translateY(-3px);
			box-shadow:
				6px 6px 12px rgba(0, 0, 0, 0.5),
				-3px -3px 8px rgba(255, 255, 255, 0.08);
		}

		button:active {
			transform: translateY(1px);
			box-shadow:
				2px 2px 4px rgba(0, 0, 0, 0.4),
				-1px -1px 3px rgba(255, 255, 255, 0.05);
		}

		.operator {
			background: linear-gradient(145deg, #ff6b35, #f7931e);
			color: white;
			font-weight: 600;
			box-shadow:
				4px 4px 8px rgba(0, 0, 0, 0.4),
				-2px -2px 6px rgba(255, 107, 53, 0.3);
		}

		.operator:hover {
			background: linear-gradient(145deg, #ff8555, #ff6b35);
			box-shadow:
				6px 6px 12px rgba(0, 0, 0, 0.5),
				-3px -3px 8px rgba(255, 107, 53, 0.4);
		}

		.equals {
			background: linear-gradient(145deg, #00d4ff, #0099cc);
			color: white;
			font-weight: 600;
			box-shadow:
				4px 4px 8px rgba(0, 0, 0, 0.4),
				-2px -2px 6px rgba(0, 212, 255, 0.3);
		}

		.equals:hover {
			background: linear-gradient(145deg, #33ddff, #00d4ff);
			box-shadow:
				6px 6px 12px rgba(0, 0, 0, 0.5),
				-3px -3px 8px rgba(0, 212, 255, 0.4);
		}

		.clear {
			background: linear-gradient(145deg, #ff4757, #ee5a6f);
			color: white;
			font-weight: 600;
			box-shadow:
				4px 4px 8px rgba(0, 0, 0, 0.4),
				-2px -2px 6px rgba(255, 71, 87, 0.3);
		}

		.clear:hover {
			background: linear-gradient(145deg, #ff6b7a, #ff4757);
			box-shadow:
				6px 6px 12px rgba(0, 0, 0, 0.5),
				-3px -3px 8px rgba(255, 71, 87, 0.4);
		}

		.zero {}

		.function {
			background: linear-gradient(145deg, #3a3a3a, #2a2a2a);
			color: #00d4ff;
			font-weight: 600;
		}

		.function:hover {
			background: linear-gradient(145deg, #4a4a4a, #3a3a3a);
		}

		/* Responsive Design */
		@media (max-width: 480px) {
			body {
				padding: 15px;
			}

			.calculator {
				padding: 20px;
				border-radius: 25px;
				max-width: 100%;
			}

			.display {
				padding: 25px 20px;
				min-height: 100px;
				border-radius: 15px;
				margin-bottom: 20px;
			}

			.previous {
				font-size: 16px;
			}

			.current {
				font-size: 40px;
			}

			button {
				padding: 20px;
				font-size: 20px;
				border-radius: 15px;
			}

			.buttons {
				gap: 10px;
			}
		}

		@media (max-width: 360px) {
			.current {
				font-size: 36px;
			}

			button {
				padding: 18px;
				font-size: 18px;
			}

			.buttons {
				gap: 8px;
			}
		}

		@media (min-width: 768px) {
			.calculator {
				max-width: 420px;
			}

			.display {
				min-height: 130px;
			}

			.current {
				font-size: 52px;
			}

			button {
				padding: 28px;
				font-size: 24px;
			}
		}

		/* Touch device optimization */
		@media (hover: none) and (pointer: coarse) {
			button {
				padding: 22px;
			}
		}
	</style>
</head>

<body>
	<div class="calculator">
		<div class="display">
			<div class="previous" id="previous"></div>
			<div class="current" id="current">0</div>
		</div>
		<div class="buttons">
			<button class="clear btn-clear" onclick="clearDisplay()"><i class="fas fa-power-off"></i></button>
			<button class="function btn-delete" onclick="deleteLast()"><i class="fas fa-backspace"></i></button>
			<button class="function btn-percent" onclick="inputOperator('%')"><i class="fas fa-percent"></i></button>
			<button class="operator btn-divide" onclick="inputOperator('/')"><i class="fas fa-divide"></i></button>

			<button class="btn-seven" onclick="inputNumber('7')">7</button>
			<button class="btn-eight" onclick="inputNumber('8')">8</button>
			<button class="btn-nine" onclick="inputNumber('9')">9</button>
			<button class="operator btn-multiply" onclick="inputOperator('*')"><i class="fas fa-times"></i></button>

			<button class="btn-four" onclick="inputNumber('4')">4</button>
			<button class="btn-five" onclick="inputNumber('5')">5</button>
			<button class="btn-six" onclick="inputNumber('6')">6</button>
			<button class="operator btn-subtract" onclick="inputOperator('-')"><i class="fas fa-minus"></i></button>

			<button class="btn-one" onclick="inputNumber('1')">1</button>
			<button class="btn-two" onclick="inputNumber('2')">2</button>
			<button class="btn-three" onclick="inputNumber('3')">3</button>
			<button class="operator btn-add" onclick="inputOperator('+')"><i class="fas fa-plus"></i></button>

			<button class="zero btn-zero" onclick="inputNumber('0')">0</button>
			<button class="btn-decimal" onclick="inputDecimal()"><i class="fas fa-circle" style="font-size: 8px;"></i></button>
			<button class="equals btn-equals" onclick="calculate()"><i class="fas fa-equals"></i></button>
		</div>
	</div>

	<script>
		let current = '0';
        let previous = '';
        let operation = null;
        let shouldResetScreen = false;

        const currentDisplay = document.getElementById('current');
        const previousDisplay = document.getElementById('previous');

        function updateDisplay() {
            currentDisplay.textContent = current;
            if (previous && operation) {
                const opSymbol = {'+': '+', '-': '−', '*': '×', '/': '÷', '%': '%'}[operation];
                previousDisplay.textContent = `${previous} ${opSymbol}`;
            } else {
                previousDisplay.textContent = '';
            }
        }

        function inputNumber(num) {
            if (shouldResetScreen) {
                current = num;
                shouldResetScreen = false;
            } else {
                current = current === '0' ? num : current + num;
            }
            updateDisplay();
        }

        function inputDecimal() {
            if (shouldResetScreen) {
                current = '0.';
                shouldResetScreen = false;
            } else if (!current.includes('.')) {
                current += '.';
            }
            updateDisplay();
        }

        function inputOperator(op) {
            if (operation !== null && !shouldResetScreen) {
                calculate();
            }
            previous = current;
            operation = op;
            shouldResetScreen = true;
            updateDisplay();
        }

        function calculate() {
            if (operation === null || shouldResetScreen) return;
            
            let result;
            const prev = parseFloat(previous);
            const curr = parseFloat(current);
            
            if (isNaN(prev) || isNaN(curr)) return;
            
            switch (operation) {
                case '+':
                    result = prev + curr;
                    break;
                case '-':
                    result = prev - curr;
                    break;
                case '*':
                    result = prev * curr;
                    break;
                case '/':
                    result = curr === 0 ? 'Error' : prev / curr;
                    break;
                case '%':
                    result = prev % curr;
                    break;
                default:
                    return;
            }
            
            current = result.toString();
            operation = null;
            previous = '';
            shouldResetScreen = true;
            updateDisplay();
        }

        function clearDisplay() {
            current = '0';
            previous = '';
            operation = null;
            shouldResetScreen = false;
            updateDisplay();
        }

        function deleteLast() {
            if (current.length === 1 || shouldResetScreen) {
                current = '0';
                shouldResetScreen = false;
            } else {
                current = current.slice(0, -1);
            }
            updateDisplay();
        }

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.key >= '0' && e.key <= '9') inputNumber(e.key);
            if (e.key === '.') inputDecimal();
            if (e.key === '+' || e.key === '-' || e.key === '*' || e.key === '/') inputOperator(e.key);
            if (e.key === '%') inputOperator('%');
            if (e.key === 'Enter' || e.key === '=') calculate();
            if (e.key === 'Escape') clearDisplay();
            if (e.key === 'Backspace') deleteLast();
        });

        updateDisplay();
	</script>
</body>

</html>
