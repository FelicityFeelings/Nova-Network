<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Home</title>
	<link rel="icon" href="/favicon.png" type="image/x-icon">
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

	<style>
		body {
			background-color: #0a0a0a;
			margin: 0;
		}

		#sidebar {
			position: fixed;
			top: 0;
			left: 0;
			height: 100vh;
			width: 4.5rem;
			transition: width 0.2s ease;
			z-index: 20;
			background-color: #000;
			color: white;
			padding: 1rem 0;
			overflow: hidden;
			border-right: 1px solid #1a1a1a;
		}

		#sidebar:hover {
			width: 13rem;
			background-color: #0a0a0a;
		}

		.sidebar-scroll {
			display: flex;
			flex-direction: column;
			height: 100%;
			overflow-y: auto;
			padding: 0 0.5rem;
		}

		#sidebar button {
			display: flex;
			align-items: center;
			width: 100%;
			padding: 0.75rem 0.875rem;
			color: #888;
			background: none;
			border: none;
			cursor: pointer;
			font-size: 0.95rem;
			transition: all 0.15s ease;
			white-space: nowrap;
			border-radius: 8px;
			margin-bottom: 0.25rem;
		}

		#sidebar button:hover {
			background-color: #1a1a1a;
			color: #fff;
		}

		#sidebar button.active {
			background-color: #1a1a1a;
			color: #fff;
		}

		#sidebar i {
			width: 24px;
			font-size: 20px;
			flex-shrink: 0;
		}

		.label {
			margin-left: 1rem;
			opacity: 0;
			transition: opacity 0.15s ease;
		}

		#sidebar:hover .label {
			opacity: 1;
		}

		.content {
			margin-left: 4.5rem;
			height: 100vh;
			overflow: auto;
		}

		#bottomButtons {
			margin-top: auto;
			padding-top: 1rem;
			border-top: 1px solid #1a1a1a;
		}

		#musicToggleBtn.music-on i {
			color: #1ed760;
		}

		.loading-overlay {
			position: absolute;
			inset: 0;
			background-color: rgba(0, 0, 0, 0.85);
			display: flex;
			align-items: center;
			justify-content: center;
			z-index: 10;
			opacity: 0;
			transition: opacity 0.2s ease;
			pointer-events: none;
		}

		.loading-overlay.show {
			opacity: 1;
			pointer-events: all;
		}

		.spinner {
			width: 40px;
			height: 40px;
			border: 3px solid #222;
			border-top: 3px solid #fff;
			border-radius: 50%;
			animation: spin 0.7s linear infinite;
		}

		@keyframes spin {
			to {
				transform: rotate(360deg);
			}
		}

		/* Music Player */
		.music-player {
			position: fixed;
			bottom: 20px;
			right: 20px;
			z-index: 30;
			background: #181818;
			border: 1px solid #282828;
			border-radius: 12px;
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
			transition: all 0.3s ease;
			width: 60px;
			height: 60px;
		}

		.music-player.hidden {
			opacity: 0;
			pointer-events: none;
		}

		.music-player.expanded {
			width: 320px;
			height: 450px;
		}

		.player-header {
			padding: 12px 16px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-bottom: 1px solid #282828;
		}

		.player-title {
			color: #fff;
			font-weight: 600;
			font-size: 14px;
		}

		.toggle-btn {
			background: none;
			border: none;
			color: #b3b3b3;
			cursor: pointer;
			padding: 5px;
			transition: color 0.2s ease;
		}

		.toggle-btn:hover {
			color: #fff;
		}

		.album-art {
			width: 180px;
			height: 180px;
			margin: 15px auto;
			border-radius: 8px;
			background: #282828;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.album-art i {
			color: #b3b3b3;
			font-size: 40px;
		}

		.track-info {
			text-align: center;
			padding: 0 16px;
			margin-bottom: 15px;
		}

		.track-title {
			color: white;
			font-size: 16px;
			font-weight: 600;
			margin-bottom: 4px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.track-artist {
			color: #b3b3b3;
			font-size: 13px;
		}

		.progress-container {
			padding: 0 16px;
			margin-bottom: 15px;
		}

		.progress-bar {
			width: 100%;
			height: 4px;
			background: #404040;
			border-radius: 2px;
			cursor: pointer;
		}

		.progress-fill {
			height: 100%;
			background: #fff;
			border-radius: 2px;
			width: 0%;
			transition: width 0.1s ease;
		}

		.time-info {
			display: flex;
			justify-content: space-between;
			color: #b3b3b3;
			font-size: 11px;
			margin-top: 6px;
		}

		.controls {
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 15px;
			padding: 0 16px 15px;
		}

		.control-btn {
			background: none;
			border: none;
			color: #b3b3b3;
			cursor: pointer;
			padding: 8px;
			transition: color 0.2s ease;
		}

		.control-btn:hover {
			color: white;
		}

		.play-btn {
			background: #fff;
			color: #000;
			width: 48px;
			height: 48px;
			border-radius: 50%;
		}

		.play-btn:hover {
			transform: scale(1.06);
		}

		.collapsed-player {
			width: 100%;
			height: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
		}

		.collapsed-icon {
			color: white;
			font-size: 20px;
		}

		.playlist-container {
			max-height: 120px;
			overflow-y: auto;
			border-top: 1px solid #282828;
		}

		.playlist-item {
			padding: 8px 16px;
			color: #b3b3b3;
			cursor: pointer;
			transition: all 0.2s ease;
			font-size: 12px;
		}

		.playlist-item:hover {
			background: #282828;
			color: #fff;
		}

		.playlist-item.active {
			color: white;
			background: #282828;
		}

		.playlist-container::-webkit-scrollbar {
			width: 8px;
		}

		.playlist-container::-webkit-scrollbar-track {
			background: transparent;
		}

		.playlist-container::-webkit-scrollbar-thumb {
			background: #404040;
			border-radius: 4px;
		}
	</style>
</head>

<body class="flex h-screen">
	<div id="sidebar">
		<div class="sidebar-scroll">
			<div>
				<button data-url="/nova/home.html" class="active"><i class="fas fa-home"></i><span class="label">Home</span></button>
				<button data-url="/nova/search.html"><i class="fas fa-search"></i><span class="label">Search</span></button>
				<button data-url="/nova/games.html"><i class="fa-solid fa-meteor"></i><span class="label">Games</span></button>
				<button data-url="/nova/tools.html"><i class="fa-solid fa-screwdriver-wrench"></i><span class="label">Tools</span></button>
				<button data-url="/nova/media/index.html"><i class="fas fa-tv"></i><span class="label">Media</span></button>
				<button data-url="/nova/extras.html"><i class="fas fa-star"></i><span class="label">Extras</span></button>
			</div>
			<div id="bottomButtons">
				<button id="musicToggleBtn" class="music-on"><i class="fas fa-music"></i><span class="label">Lobby Beats</span></button>
				<button id="fullscreenBtn"><i class="fas fa-expand"></i><span class="label">Fullscreen</span></button>
			</div>
		</div>
	</div>

	<div class="flex-1 content">
		<div style="position: relative; width: 100%; height: 100%;">
			<iframe id="iframeViewer" src="/nova/home.html" class="w-full h-full border-0"></iframe>
			<div id="loadingOverlay" class="loading-overlay">
				<div class="spinner"></div>
			</div>
		</div>
	</div>

	<!-- Music Player -->
	<div id="musicPlayer" class="music-player">
		<div id="collapsedView" class="collapsed-player">
			<i class="fas fa-music collapsed-icon"></i>
		</div>

		<div id="expandedView" style="display: none;">
			<div class="player-header">
				<span class="player-title">Lobby Beats</span>
				<button class="toggle-btn" id="collapseBtn"><i class="fas fa-chevron-down"></i></button>
			</div>

			<div class="album-art"><i class="fas fa-music"></i></div>

			<div class="track-info">
				<div class="track-title" id="trackTitle">Loading...</div>
				<div class="track-artist" id="trackArtist">Nova Network</div>
			</div>

			<div class="progress-container">
				<div class="progress-bar" id="progressBar">
					<div class="progress-fill" id="progressFill"></div>
				</div>
				<div class="time-info">
					<span id="currentTime">0:00</span>
					<span id="totalTime">0:00</span>
				</div>
			</div>

			<div class="controls">
				<button class="control-btn" id="prevBtn"><i class="fas fa-step-backward"></i></button>
				<button class="control-btn play-btn" id="playBtn"><i class="fas fa-play" id="playIcon"></i></button>
				<button class="control-btn" id="nextBtn"><i class="fas fa-step-forward"></i></button>
			</div>

			<div class="playlist-container" id="playlistContainer"></div>
		</div>
	</div>

	<audio id="audioPlayer" preload="metadata"></audio>

	<script>
		const $ = id => document.getElementById(id);
		const $$ = sel => document.querySelectorAll(sel);

		const tracks = [
			{ title: 'Rainy Day', artist: 'Nova Network', url: '/music/rainyday.mp3' },
			{ title: 'A Walk in the Night', artist: 'Nova Network', url: '/music/walk.mp3' },
			{ title: 'Shooting Stars', artist: 'Nova Network', url: '/music/stars.mp3' },
			{ title: 'Good Night', artist: 'FASSSounds', url: '/music/night.mp3' },
			{ title: 'Lofi Study', artist: 'FASSSounds', url: '/music/study.mp3' }
		];

		let currentTrack = 0;
		let isMusicEnabled = true;

		const audio = $('audioPlayer');
		const player = $('musicPlayer');

		// Sidebar Navigation
		$$('#sidebar button[data-url]').forEach(btn => {
			btn.onclick = () => {
				$$('#sidebar button[data-url]').forEach(b => b.classList.remove('active'));
				btn.classList.add('active');
				$('loadingOverlay').classList.add('show');
				$('iframeViewer').src = btn.dataset.url;
			};
		});

		$('iframeViewer').onload = () => $('loadingOverlay').classList.remove('show');

		// Fullscreen
		$('fullscreenBtn').onclick = () => {
			if (!document.fullscreenElement) {
				$('iframeViewer').parentElement.requestFullscreen();
			} else {
				document.exitFullscreen();
			}
		};

		// Music Toggle
		$('musicToggleBtn').onclick = () => {
			isMusicEnabled = !isMusicEnabled;
			player.classList.toggle('hidden', !isMusicEnabled);
			$('musicToggleBtn').className = isMusicEnabled ? 'music-on' : 'music-off';
			if (!isMusicEnabled && !audio.paused) {
				audio.pause();
			}
		};

		// Player Expand/Collapse
		const togglePlayer = () => {
			const expanded = player.classList.toggle('expanded');
			$('collapsedView').style.display = expanded ? 'none' : 'flex';
			$('expandedView').style.display = expanded ? 'block' : 'none';
		};

		$('collapsedView').onclick = togglePlayer;
		$('collapseBtn').onclick = togglePlayer;

		// Playback Controls
		$('playBtn').onclick = () => {
			audio.paused ? audio.play() : audio.pause();
		};

		$('prevBtn').onclick = () => loadTrack((currentTrack - 1 + tracks.length) % tracks.length, !audio.paused);
		$('nextBtn').onclick = () => loadTrack((currentTrack + 1) % tracks.length, !audio.paused);

		function loadTrack(idx, autoPlay = false) {
			currentTrack = idx;
			const track = tracks[idx];
			audio.src = track.url;
			$('trackTitle').textContent = track.title;
			$('trackArtist').textContent = track.artist;
			$('progressFill').style.width = '0%';
			updatePlaylist();
			if (autoPlay) audio.play();
		}

		function updatePlaylist() {
			$('playlistContainer').innerHTML = tracks.map((t, i) =>
				`<div class="playlist-item ${i === currentTrack ? 'active' : ''}" onclick="loadTrack(${i}, ${!audio.paused})">${t.title} - ${t.artist}</div>`
			).join('');
		}

		// Progress
		audio.ontimeupdate = () => {
			if (audio.duration) {
				const pct = (audio.currentTime / audio.duration) * 100;
				$('progressFill').style.width = pct + '%';
				$('currentTime').textContent = formatTime(audio.currentTime);
			}
		};

		audio.onloadedmetadata = () => {
			$('totalTime').textContent = formatTime(audio.duration);
		};

		$('progressBar').onclick = e => {
			const rect = e.target.getBoundingClientRect();
			audio.currentTime = ((e.clientX - rect.left) / rect.width) * audio.duration;
		};

		audio.onplay = () => $('playIcon').className = 'fas fa-pause';
		audio.onpause = () => $('playIcon').className = 'fas fa-play';
		audio.onended = () => loadTrack((currentTrack + 1) % tracks.length, true);

		function formatTime(s) {
			const m = Math.floor(s / 60);
			const sec = Math.floor(s % 60);
			return `${m}:${sec.toString().padStart(2, '0')}`;
		}

		// Init
		loadTrack(0);
		updatePlaylist();
		audio.volume = 0.7;
	</script>
</body>

</html>

</html>
